{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _toConsumableArray2=_interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));var _asyncToGenerator2=_interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));var _slicedToArray2=_interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));var _react=_interopRequireWildcard(require(\"react\"));var Ionicons=_interopRequireWildcard(require(\"react-icons/io5\"));var _authStore=require(\"../../state/authStore\");var _storage=require(\"../../state/storage\");var _productService=require(\"../../service/productService\");var _Constants=require(\"../../utils/Constants\");var _CustomHeader=_interopRequireDefault(require(\"../../components/ui/CustomHeader\"));function _interopRequireWildcard(e,t){if(\"function\"==typeof WeakMap)var r=new WeakMap(),n=new WeakMap();return(_interopRequireWildcard=function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;var o,i,f={__proto__:null,default:e};if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return f;if(o=t?n:r){if(o.has(e))return o.get(e);o.set(e,f);}for(var _t in e)\"default\"!==_t&&{}.hasOwnProperty.call(e,_t)&&((i=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,_t))&&(i.get||i.set)?o(f,_t,i):f[_t]=e[_t]);return f;})(e,t);}var CustomerSupport=function CustomerSupport(){var _useState=(0,_react.useState)([]),_useState2=(0,_slicedToArray2.default)(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=(0,_react.useState)(\"\"),_useState4=(0,_slicedToArray2.default)(_useState3,2),input=_useState4[0],setInput=_useState4[1];var listRef=(0,_react.useRef)(null);var inputRef=(0,_react.useRef)(null);var _useAuthStore=(0,_authStore.useAuthStore)(),user=_useAuthStore.user;var scrollToBottom=function scrollToBottom(){if(listRef.current){listRef.current.scrollTo({top:listRef.current.scrollHeight,behavior:\"smooth\"});}};(0,_react.useEffect)(scrollToBottom,[messages]);(0,_react.useEffect)(function(){var loadMessages=function(){var _ref=(0,_asyncToGenerator2.default)(function*(){try{var userPhone=String((user==null?void 0:user.phone)||\"\");var backendMessages=yield(0,_productService.getMessagesByPhoneNumber)(userPhone);var formattedBackendMessages=backendMessages.map(function(msg){return Object.assign({},msg,{timestamp:new Date(msg.timestamp).toLocaleTimeString([],{hour:\"2-digit\",minute:\"2-digit\",hour12:true})});});var localMessages=_storage.mmkvStorage.getItem(\"chat_messages\");var local=localMessages?JSON.parse(localMessages):[];var merged=[].concat((0,_toConsumableArray2.default)(local),(0,_toConsumableArray2.default)(formattedBackendMessages)).reduce(function(acc,curr){if(!acc.some(function(m){return m.id===curr.id;}))acc.push(curr);return acc;},[]);setMessages(merged);_storage.mmkvStorage.setItem(\"chat_messages\",JSON.stringify(merged));}catch(error){console.error(\"‚ùå Failed to load messages:\",error);}});return function loadMessages(){return _ref.apply(this,arguments);};}();loadMessages();},[]);(0,_react.useEffect)(function(){var saved=_storage.mmkvStorage.getItem(\"chat_messages\");if(!saved||JSON.parse(saved).length===0){var firstMsg={id:Date.now().toString(),text:\"üëã Hello! How can we help you today?\",sender:\"support\",timestamp:new Date().toLocaleTimeString([],{hour:\"2-digit\",minute:\"2-digit\",hour12:true}),phonenumber:String((user==null?void 0:user.phone)||\"\")};setMessages([firstMsg]);_storage.mmkvStorage.setItem(\"chat_messages\",JSON.stringify([firstMsg]));}},[]);var sendMessage=function(){var _ref2=(0,_asyncToGenerator2.default)(function*(){if(!input.trim())return;var newMsg={id:Date.now().toString(),text:input,sender:\"user\",timestamp:new Date().toLocaleTimeString([],{hour:\"2-digit\",minute:\"2-digit\",hour12:true}),phonenumber:String((user==null?void 0:user.phone)||\"\")};var updated=[].concat((0,_toConsumableArray2.default)(messages),[newMsg]);setMessages(updated);_storage.mmkvStorage.setItem(\"chat_messages\",JSON.stringify(updated));setInput(\"\");if(inputRef.current){inputRef.current.style.height=\"40px\";}try{var response=yield(0,_productService.sendMessageToBackend)(newMsg);if(response&&response.text){var reply={id:`${Date.now()}-r`,text:response.text,sender:\"support\",timestamp:new Date().toLocaleTimeString([],{hour:\"2-digit\",minute:\"2-digit\",hour12:true}),phonenumber:String((user==null?void 0:user.phone)||\"\")};var finalMsgs=[].concat((0,_toConsumableArray2.default)(updated),[reply]);setMessages(finalMsgs);_storage.mmkvStorage.setItem(\"chat_messages\",JSON.stringify(finalMsgs));}}catch(e){console.error(\"‚ùå Error sending message\",e);}});return function sendMessage(){return _ref2.apply(this,arguments);};}();var handleInput=function handleInput(e){var textarea=e.target;textarea.style.height=\"4px\";var scrollHeight=textarea.scrollHeight;var newHeight=Math.min(scrollHeight,100);textarea.style.height=`${newHeight}px`;setInput(textarea.value);};return _react.default.createElement(\"div\",{style:styles.wrapper},_react.default.createElement(_CustomHeader.default,{title:\"Customer Support \\uD83D\\uDCAC\"}),_react.default.createElement(\"div\",{style:styles.chatContainer},_react.default.createElement(\"div\",{ref:listRef,style:styles.messageList},messages.map(function(msg){return _react.default.createElement(\"div\",{key:msg.id,style:Object.assign({},styles.messageBubble,msg.sender===\"user\"?styles.userBubble:styles.supportBubble)},_react.default.createElement(\"p\",{style:styles.messageText},msg.text),_react.default.createElement(\"span\",{style:styles.timestamp},msg.timestamp));})),_react.default.createElement(\"div\",{style:styles.inputArea},_react.default.createElement(\"textarea\",{ref:inputRef,value:input,onChange:handleInput,placeholder:\"Type a message...\",style:styles.input,rows:1}),_react.default.createElement(\"button\",{onClick:sendMessage,disabled:!input.trim(),style:Object.assign({},styles.sendButton,{opacity:input.trim()?1:0.6,cursor:input.trim()?\"pointer\":\"not-allowed\"})},_react.default.createElement(Ionicons.IoPaperPlane,{size:20,color:\"white\"})))));};var styles={wrapper:{height:\"100vh\",display:\"flex\",flexDirection:\"column\",background:\"linear-gradient(135deg, #e0f7fa, #80deea, #00acc1)\",overflow:\"hidden\"},chatContainer:{flex:1,display:\"flex\",flexDirection:\"column\",justifyContent:\"space-between\",padding:16,maxWidth:600,margin:\"0 auto\",width:\"89%\",background:\"rgba(255,255,255,0.3)\",borderRadius:16,backdropFilter:\"blur(14px)\",boxShadow:\"0 8px 25px rgba(0,0,0,0.15)\"},messageList:{flex:1,overflowY:\"auto\",padding:\"10px 5px\",display:\"flex\",flexDirection:\"column\",gap:10,scrollbarWidth:\"thin\"},messageBubble:{maxWidth:\"75%\",padding:\"7px 10px\",borderRadius:14,boxShadow:\"0 2px 5px rgba(0,0,0,0.1)\",whiteSpace:\"pre-line\"},userBubble:{alignSelf:\"flex-end\",background:\"linear-gradient(135deg, #00c6ff, #0072ff)\",color:\"white\",borderBottomRightRadius:4},supportBubble:{alignSelf:\"flex-start\",backgroundColor:\"rgba(255,255,255,0.9)\",color:\"#333\",borderBottomLeftRadius:4},messageText:{margin:1,fontSize:15,lineHeight:1,fontFamily:_Constants.Fonts.Regular},timestamp:{display:\"block\",marginTop:6,fontSize:11,opacity:0.6,textAlign:\"right\"},inputArea:{display:\"flex\",alignItems:\"center\",gap:10,backgroundColor:\"rgba(255,255,255,0.8)\",padding:\"5px 7px\",borderRadius:50,boxShadow:\"0 2px 8px rgba(0,0,0,0.1)\"},input:{flex:1,border:\"none\",borderRadius:20,padding:\"1px 1px\",fontSize:15,outline:\"none\",fontFamily:_Constants.Fonts.Regular,backgroundColor:\"transparent\",color:\"#222\",resize:\"none\",overflowY:\"auto\",maxHeight:\"100px\"},sendButton:{border:\"none\",background:\"linear-gradient(135deg, #00c6ff, #0072ff)\",borderRadius:\"50%\",padding:5,display:\"flex\",alignItems:\"center\",justifyContent:\"center\",transition:\"all 0.2s ease\"}};var _default=exports.default=CustomerSupport;","map":{"version":3,"names":["_react","_interopRequireWildcard","require","Ionicons","_authStore","_storage","_productService","_Constants","_CustomHeader","_interopRequireDefault","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","CustomerSupport","_useState","useState","_useState2","_slicedToArray2","messages","setMessages","_useState3","_useState4","input","setInput","listRef","useRef","inputRef","_useAuthStore","useAuthStore","user","scrollToBottom","current","scrollTo","top","scrollHeight","behavior","useEffect","loadMessages","_ref","_asyncToGenerator2","userPhone","String","phone","backendMessages","getMessagesByPhoneNumber","formattedBackendMessages","map","msg","assign","timestamp","Date","toLocaleTimeString","hour","minute","hour12","localMessages","mmkvStorage","getItem","local","JSON","parse","merged","concat","_toConsumableArray2","reduce","acc","curr","some","m","id","push","setItem","stringify","error","console","apply","arguments","saved","length","firstMsg","now","toString","text","sender","phonenumber","sendMessage","_ref2","trim","newMsg","updated","style","height","response","sendMessageToBackend","reply","finalMsgs","handleInput","textarea","target","newHeight","Math","min","value","createElement","styles","wrapper","title","chatContainer","ref","messageList","key","messageBubble","userBubble","supportBubble","messageText","inputArea","onChange","placeholder","rows","onClick","disabled","sendButton","opacity","cursor","IoPaperPlane","size","color","display","flexDirection","background","overflow","flex","justifyContent","padding","maxWidth","margin","width","borderRadius","backdropFilter","boxShadow","overflowY","gap","scrollbarWidth","whiteSpace","alignSelf","borderBottomRightRadius","backgroundColor","borderBottomLeftRadius","fontSize","lineHeight","fontFamily","Fonts","Regular","marginTop","textAlign","alignItems","border","outline","resize","maxHeight","transition","_default","exports"],"sources":["C:/Users/acer/Desktop/paltanweb/src/features/profile/customerSupport.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport * as Ionicons from \"react-icons/io5\";\r\nimport { useAuthStore } from \"@state/authStore\";\r\nimport { mmkvStorage } from \"@state/storage\";\r\nimport {\r\n  getMessagesByPhoneNumber,\r\n  sendMessageToBackend,\r\n} from \"@service/productService\";\r\nimport { Fonts } from \"@utils/Constants\";\r\nimport CustomHeader from \"@components/ui/CustomHeader\";\r\n\r\ninterface Message {\r\n  id: string;\r\n  text: string;\r\n  sender: \"user\" | \"support\";\r\n  timestamp: string;\r\n  phonenumber?: string;\r\n}\r\n\r\nconst CustomerSupport: React.FC = () => {\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const listRef = useRef<HTMLDivElement>(null);\r\n  const inputRef = useRef<HTMLTextAreaElement>(null);\r\n  const { user } = useAuthStore();\r\n\r\n  /* üß≠ Scroll to bottom whenever messages update */\r\n  const scrollToBottom = () => {\r\n    if (listRef.current) {\r\n      listRef.current.scrollTo({\r\n        top: listRef.current.scrollHeight,\r\n        behavior: \"smooth\",\r\n      });\r\n    }\r\n  };\r\n  useEffect(scrollToBottom, [messages]);\r\n\r\n  /* üì® Load messages */\r\n  useEffect(() => {\r\n    const loadMessages = async () => {\r\n      try {\r\n        const userPhone = String(user?.phone || \"\");\r\n        const backendMessages = await getMessagesByPhoneNumber(userPhone);\r\n        const formattedBackendMessages = backendMessages.map((msg: Message) => ({\r\n          ...msg,\r\n          timestamp: new Date(msg.timestamp).toLocaleTimeString([], {\r\n            hour: \"2-digit\",\r\n            minute: \"2-digit\",\r\n            hour12: true,\r\n          }),\r\n        }));\r\n        const localMessages = mmkvStorage.getItem(\"chat_messages\");\r\n        const local = localMessages ? JSON.parse(localMessages) : [];\r\n        const merged = [...local, ...formattedBackendMessages].reduce(\r\n          (acc: Message[], curr: Message) => {\r\n            if (!acc.some((m) => m.id === curr.id)) acc.push(curr);\r\n            return acc;\r\n          },\r\n          []\r\n        );\r\n        setMessages(merged);\r\n        mmkvStorage.setItem(\"chat_messages\", JSON.stringify(merged));\r\n      } catch (error) {\r\n        console.error(\"‚ùå Failed to load messages:\", error);\r\n      }\r\n    };\r\n\r\n    loadMessages();\r\n  }, []);\r\n\r\n  /* üëã Add first welcome message */\r\n  useEffect(() => {\r\n    const saved = mmkvStorage.getItem(\"chat_messages\");\r\n    if (!saved || JSON.parse(saved).length === 0) {\r\n      const firstMsg: Message = {\r\n        id: Date.now().toString(),\r\n        text: \"üëã Hello! How can we help you today?\",\r\n        sender: \"support\",\r\n        timestamp: new Date().toLocaleTimeString([], {\r\n          hour: \"2-digit\",\r\n          minute: \"2-digit\",\r\n          hour12: true,\r\n        }),\r\n        phonenumber: String(user?.phone || \"\"),\r\n      };\r\n      setMessages([firstMsg]);\r\n      mmkvStorage.setItem(\"chat_messages\", JSON.stringify([firstMsg]));\r\n    }\r\n  }, []);\r\n\r\n  /* üì® Send message */\r\n  const sendMessage = async () => {\r\n    if (!input.trim()) return;\r\n\r\n    const newMsg: Message = {\r\n      id: Date.now().toString(),\r\n      text: input,\r\n      sender: \"user\",\r\n      timestamp: new Date().toLocaleTimeString([], {\r\n        hour: \"2-digit\",\r\n        minute: \"2-digit\",\r\n        hour12: true,\r\n      }),\r\n      phonenumber: String(user?.phone || \"\"),\r\n    };\r\n\r\n    const updated = [...messages, newMsg];\r\n    setMessages(updated);\r\n    mmkvStorage.setItem(\"chat_messages\", JSON.stringify(updated));\r\n    setInput(\"\");\r\n\r\n    // Reset textarea height after sending\r\n    if (inputRef.current) {\r\n      inputRef.current.style.height = \"40px\";\r\n    }\r\n\r\n    try {\r\n      const response = await sendMessageToBackend(newMsg);\r\n      if (response && response.text) {\r\n        const reply: Message = {\r\n          id: `${Date.now()}-r`,\r\n          text: response.text,\r\n          sender: \"support\",\r\n          timestamp: new Date().toLocaleTimeString([], {\r\n            hour: \"2-digit\",\r\n            minute: \"2-digit\",\r\n            hour12: true,\r\n          }),\r\n          phonenumber: String(user?.phone || \"\"),\r\n        };\r\n        const finalMsgs = [...updated, reply];\r\n        setMessages(finalMsgs);\r\n        mmkvStorage.setItem(\"chat_messages\", JSON.stringify(finalMsgs));\r\n      }\r\n    } catch (e) {\r\n      console.error(\"‚ùå Error sending message\", e);\r\n    }\r\n  };\r\n\r\n  /* üß© Adjust height only when line breaks (not on every keypress) */\r\n  const handleInput = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    const textarea = e.target;\r\n    textarea.style.height = \"4px\"; // reset before measuring\r\n    const scrollHeight = textarea.scrollHeight;\r\n\r\n    // Max height = approx 4 lines (100px)\r\n    const newHeight = Math.min(scrollHeight, 100);\r\n    textarea.style.height = `${newHeight}px`;\r\n\r\n    setInput(textarea.value);\r\n  };\r\n\r\n  return (\r\n    <div style={styles.wrapper}>\r\n      <CustomHeader title=\"Customer Support üí¨\" />\r\n\r\n      {/* Chat Window */}\r\n      <div style={styles.chatContainer}>\r\n        <div ref={listRef} style={styles.messageList}>\r\n          {messages.map((msg) => (\r\n            <div\r\n              key={msg.id}\r\n              style={{\r\n                ...styles.messageBubble,\r\n                ...(msg.sender === \"user\"\r\n                  ? styles.userBubble\r\n                  : styles.supportBubble),\r\n              }}\r\n            >\r\n              <p style={styles.messageText}>{msg.text}</p>\r\n              <span style={styles.timestamp}>{msg.timestamp}</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Input */}\r\n        <div style={styles.inputArea}>\r\n          <textarea\r\n            ref={inputRef}\r\n            value={input}\r\n            onChange={handleInput}\r\n            placeholder=\"Type a message...\"\r\n            style={styles.input}\r\n            rows={1}\r\n          />\r\n          <button\r\n            onClick={sendMessage}\r\n            disabled={!input.trim()}\r\n            style={{\r\n              ...styles.sendButton,\r\n              opacity: input.trim() ? 1 : 0.6,\r\n              cursor: input.trim() ? \"pointer\" : \"not-allowed\",\r\n            }}\r\n          >\r\n            <Ionicons.IoPaperPlane size={20} color=\"white\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n/* ---------------------------- STYLES ---------------------------- */\r\nconst styles: Record<string, React.CSSProperties> = {\r\n  wrapper: {\r\n    height: \"100vh\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    background: \"linear-gradient(135deg, #e0f7fa, #80deea, #00acc1)\",\r\n    overflow: \"hidden\",\r\n  },\r\n  chatContainer: {\r\n    flex: 1,\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"space-between\",\r\n    padding: 16,\r\n    maxWidth: 600,\r\n    margin: \"0 auto\",\r\n    width: \"89%\",\r\n    background: \"rgba(255,255,255,0.3)\",\r\n    borderRadius: 16,\r\n    backdropFilter: \"blur(14px)\",\r\n    boxShadow: \"0 8px 25px rgba(0,0,0,0.15)\",\r\n  },\r\n  messageList: {\r\n    flex: 1,\r\n    overflowY: \"auto\",\r\n    padding: \"10px 5px\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    gap: 10,\r\n    scrollbarWidth: \"thin\",\r\n  },\r\n  messageBubble: {\r\n    maxWidth: \"75%\",\r\n    padding: \"7px 10px\",\r\n    borderRadius: 14,\r\n    boxShadow: \"0 2px 5px rgba(0,0,0,0.1)\",\r\n    whiteSpace: \"pre-line\",\r\n  },\r\n  userBubble: {\r\n    alignSelf: \"flex-end\",\r\n    background: \"linear-gradient(135deg, #00c6ff, #0072ff)\",\r\n    color: \"white\",\r\n    borderBottomRightRadius: 4,\r\n  },\r\n  supportBubble: {\r\n    alignSelf: \"flex-start\",\r\n    backgroundColor: \"rgba(255,255,255,0.9)\",\r\n    color: \"#333\",\r\n    borderBottomLeftRadius: 4,\r\n  },\r\n  messageText: {\r\n    margin: 1,\r\n    fontSize: 15,\r\n    lineHeight: 1,\r\n    fontFamily: Fonts.Regular,\r\n  },\r\n  timestamp: {\r\n    display: \"block\",\r\n    marginTop: 6,\r\n    fontSize: 11,\r\n    opacity: 0.6,\r\n    textAlign: \"right\",\r\n  },\r\n  inputArea: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    gap: 10,\r\n    backgroundColor: \"rgba(255,255,255,0.8)\",\r\n    padding: \"5px 7px\",\r\n    borderRadius: 50,\r\n    boxShadow: \"0 2px 8px rgba(0,0,0,0.1)\",\r\n   // marginTop: 16,\r\n  },\r\n  input: {\r\n    flex: 1,\r\n    border: \"none\",\r\n    borderRadius: 20,\r\n    padding: \"1px 1px\",\r\n    fontSize: 15,\r\n    outline: \"none\",\r\n    fontFamily: Fonts.Regular,\r\n    backgroundColor: \"transparent\",\r\n    color: \"#222\",\r\n    resize: \"none\",\r\n    overflowY: \"auto\",\r\n    maxHeight: \"100px\", // prevent infinite growth\r\n  },\r\n  sendButton: {\r\n    border: \"none\",\r\n    background: \"linear-gradient(135deg, #00c6ff, #0072ff)\",\r\n    borderRadius: \"50%\",\r\n    padding: 5,\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    transition: \"all 0.2s ease\",\r\n  },\r\n};\r\n\r\nexport default CustomerSupport;\r\n"],"mappings":"qcAAA,IAAAA,MAAA,CAAAC,uBAAA,CAAAC,OAAA,WACA,IAAAC,QAAA,CAAAF,uBAAA,CAAAC,OAAA,qBACA,IAAAE,UAAA,CAAAF,OAAA,0BACA,IAAAG,QAAA,CAAAH,OAAA,wBACA,IAAAI,eAAA,CAAAJ,OAAA,iCAIA,IAAAK,UAAA,CAAAL,OAAA,0BACA,IAAAM,aAAA,CAAAC,sBAAA,CAAAP,OAAA,sCAAuD,SAAAD,wBAAAS,CAAA,CAAAC,CAAA,wBAAAC,OAAA,KAAAC,CAAA,KAAAD,OAAA,GAAAE,CAAA,KAAAF,OAAA,UAAAX,uBAAA,UAAAA,wBAAAS,CAAA,CAAAC,CAAA,MAAAA,CAAA,EAAAD,CAAA,EAAAA,CAAA,CAAAK,UAAA,QAAAL,CAAA,KAAAM,CAAA,CAAAC,CAAA,CAAAC,CAAA,EAAAC,SAAA,MAAAC,OAAA,CAAAV,CAAA,YAAAA,CAAA,mBAAAA,CAAA,qBAAAA,CAAA,QAAAQ,CAAA,IAAAF,CAAA,CAAAL,CAAA,CAAAG,CAAA,CAAAD,CAAA,KAAAG,CAAA,CAAAK,GAAA,CAAAX,CAAA,SAAAM,CAAA,CAAAM,GAAA,CAAAZ,CAAA,EAAAM,CAAA,CAAAO,GAAA,CAAAb,CAAA,CAAAQ,CAAA,WAAAM,EAAA,IAAAd,CAAA,aAAAc,EAAA,KAAAC,cAAA,CAAAC,IAAA,CAAAhB,CAAA,CAAAc,EAAA,KAAAP,CAAA,EAAAD,CAAA,CAAAW,MAAA,CAAAC,cAAA,GAAAD,MAAA,CAAAE,wBAAA,CAAAnB,CAAA,CAAAc,EAAA,KAAAP,CAAA,CAAAK,GAAA,EAAAL,CAAA,CAAAM,GAAA,EAAAP,CAAA,CAAAE,CAAA,CAAAM,EAAA,CAAAP,CAAA,EAAAC,CAAA,CAAAM,EAAA,EAAAd,CAAA,CAAAc,EAAA,UAAAN,CAAA,IAAAR,CAAA,CAAAC,CAAA,GAUvD,GAAM,CAAAmB,eAAyB,CAAG,QAA5B,CAAAA,eAAyBA,CAAA,CAAS,CACtC,IAAAC,SAAA,CAAgC,GAAAC,eAAQ,EAAY,EAAE,CAAC,CAAAC,UAAA,IAAAC,eAAA,CAAAd,OAAA,EAAAW,SAAA,IAAhDI,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAC5B,IAAAI,UAAA,CAA0B,GAAAL,eAAQ,EAAC,EAAE,CAAC,CAAAM,UAAA,IAAAJ,eAAA,CAAAd,OAAA,EAAAiB,UAAA,IAA/BE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACtB,GAAM,CAAAG,OAAO,CAAG,GAAAC,aAAM,EAAiB,IAAI,CAAC,CAC5C,GAAM,CAAAC,QAAQ,CAAG,GAAAD,aAAM,EAAsB,IAAI,CAAC,CAClD,IAAAE,aAAA,CAAiB,GAAAC,uBAAY,EAAC,CAAC,CAAvBC,IAAI,CAAAF,aAAA,CAAJE,IAAI,CAGZ,GAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAA,CAAS,CAC3B,GAAIN,OAAO,CAACO,OAAO,CAAE,CACnBP,OAAO,CAACO,OAAO,CAACC,QAAQ,CAAC,CACvBC,GAAG,CAAET,OAAO,CAACO,OAAO,CAACG,YAAY,CACjCC,QAAQ,CAAE,QACZ,CAAC,CAAC,CACJ,CACF,CAAC,CACD,GAAAC,gBAAS,EAACN,cAAc,CAAE,CAACZ,QAAQ,CAAC,CAAC,CAGrC,GAAAkB,gBAAS,EAAC,UAAM,CACd,GAAM,CAAAC,YAAY,gBAAAC,IAAA,IAAAC,kBAAA,CAAApC,OAAA,EAAG,WAAY,CAC/B,GAAI,CACF,GAAM,CAAAqC,SAAS,CAAGC,MAAM,CAAC,CAAAZ,IAAI,cAAJA,IAAI,CAAEa,KAAK,GAAI,EAAE,CAAC,CAC3C,GAAM,CAAAC,eAAe,MAAS,GAAAC,wCAAwB,EAACJ,SAAS,CAAC,CACjE,GAAM,CAAAK,wBAAwB,CAAGF,eAAe,CAACG,GAAG,CAAC,SAACC,GAAY,SAAArC,MAAA,CAAAsC,MAAA,IAC7DD,GAAG,EACNE,SAAS,CAAE,GAAI,CAAAC,IAAI,CAACH,GAAG,CAACE,SAAS,CAAC,CAACE,kBAAkB,CAAC,EAAE,CAAE,CACxDC,IAAI,CAAE,SAAS,CACfC,MAAM,CAAE,SAAS,CACjBC,MAAM,CAAE,IACV,CAAC,CAAC,IACF,CAAC,CACH,GAAM,CAAAC,aAAa,CAAGC,oBAAW,CAACC,OAAO,CAAC,eAAe,CAAC,CAC1D,GAAM,CAAAC,KAAK,CAAGH,aAAa,CAAGI,IAAI,CAACC,KAAK,CAACL,aAAa,CAAC,CAAG,EAAE,CAC5D,GAAM,CAAAM,MAAM,CAAG,GAAAC,MAAA,IAAAC,mBAAA,CAAA5D,OAAA,EAAIuD,KAAK,KAAAK,mBAAA,CAAA5D,OAAA,EAAK0C,wBAAwB,GAAEmB,MAAM,CAC3D,SAACC,GAAc,CAAEC,IAAa,CAAK,CACjC,GAAI,CAACD,GAAG,CAACE,IAAI,CAAC,SAACC,CAAC,QAAK,CAAAA,CAAC,CAACC,EAAE,GAAKH,IAAI,CAACG,EAAE,GAAC,CAAEJ,GAAG,CAACK,IAAI,CAACJ,IAAI,CAAC,CACtD,MAAO,CAAAD,GAAG,CACZ,CAAC,CACD,EACF,CAAC,CACD9C,WAAW,CAAC0C,MAAM,CAAC,CACnBL,oBAAW,CAACe,OAAO,CAAC,eAAe,CAAEZ,IAAI,CAACa,SAAS,CAACX,MAAM,CAAC,CAAC,CAC9D,CAAE,MAAOY,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CACpD,CACF,CAAC,iBA1BK,CAAApC,YAAYA,CAAA,SAAAC,IAAA,CAAAqC,KAAA,MAAAC,SAAA,OA0BjB,CAEDvC,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,EAAE,CAAC,CAGN,GAAAD,gBAAS,EAAC,UAAM,CACd,GAAM,CAAAyC,KAAK,CAAGrB,oBAAW,CAACC,OAAO,CAAC,eAAe,CAAC,CAClD,GAAI,CAACoB,KAAK,EAAIlB,IAAI,CAACC,KAAK,CAACiB,KAAK,CAAC,CAACC,MAAM,GAAK,CAAC,CAAE,CAC5C,GAAM,CAAAC,QAAiB,CAAG,CACxBV,EAAE,CAAEnB,IAAI,CAAC8B,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CACzBC,IAAI,CAAE,sCAAsC,CAC5CC,MAAM,CAAE,SAAS,CACjBlC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,kBAAkB,CAAC,EAAE,CAAE,CAC3CC,IAAI,CAAE,SAAS,CACfC,MAAM,CAAE,SAAS,CACjBC,MAAM,CAAE,IACV,CAAC,CAAC,CACF8B,WAAW,CAAE3C,MAAM,CAAC,CAAAZ,IAAI,cAAJA,IAAI,CAAEa,KAAK,GAAI,EAAE,CACvC,CAAC,CACDvB,WAAW,CAAC,CAAC4D,QAAQ,CAAC,CAAC,CACvBvB,oBAAW,CAACe,OAAO,CAAC,eAAe,CAAEZ,IAAI,CAACa,SAAS,CAAC,CAACO,QAAQ,CAAC,CAAC,CAAC,CAClE,CACF,CAAC,CAAE,EAAE,CAAC,CAGN,GAAM,CAAAM,WAAW,gBAAAC,KAAA,IAAA/C,kBAAA,CAAApC,OAAA,EAAG,WAAY,CAC9B,GAAI,CAACmB,KAAK,CAACiE,IAAI,CAAC,CAAC,CAAE,OAEnB,GAAM,CAAAC,MAAe,CAAG,CACtBnB,EAAE,CAAEnB,IAAI,CAAC8B,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CACzBC,IAAI,CAAE5D,KAAK,CACX6D,MAAM,CAAE,MAAM,CACdlC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,kBAAkB,CAAC,EAAE,CAAE,CAC3CC,IAAI,CAAE,SAAS,CACfC,MAAM,CAAE,SAAS,CACjBC,MAAM,CAAE,IACV,CAAC,CAAC,CACF8B,WAAW,CAAE3C,MAAM,CAAC,CAAAZ,IAAI,cAAJA,IAAI,CAAEa,KAAK,GAAI,EAAE,CACvC,CAAC,CAED,GAAM,CAAA+C,OAAO,IAAA3B,MAAA,IAAAC,mBAAA,CAAA5D,OAAA,EAAOe,QAAQ,GAAEsE,MAAM,EAAC,CACrCrE,WAAW,CAACsE,OAAO,CAAC,CACpBjC,oBAAW,CAACe,OAAO,CAAC,eAAe,CAAEZ,IAAI,CAACa,SAAS,CAACiB,OAAO,CAAC,CAAC,CAC7DlE,QAAQ,CAAC,EAAE,CAAC,CAGZ,GAAIG,QAAQ,CAACK,OAAO,CAAE,CACpBL,QAAQ,CAACK,OAAO,CAAC2D,KAAK,CAACC,MAAM,CAAG,MAAM,CACxC,CAEA,GAAI,CACF,GAAM,CAAAC,QAAQ,MAAS,GAAAC,oCAAoB,EAACL,MAAM,CAAC,CACnD,GAAII,QAAQ,EAAIA,QAAQ,CAACV,IAAI,CAAE,CAC7B,GAAM,CAAAY,KAAc,CAAG,CACrBzB,EAAE,CAAE,GAAGnB,IAAI,CAAC8B,GAAG,CAAC,CAAC,IAAI,CACrBE,IAAI,CAAEU,QAAQ,CAACV,IAAI,CACnBC,MAAM,CAAE,SAAS,CACjBlC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,kBAAkB,CAAC,EAAE,CAAE,CAC3CC,IAAI,CAAE,SAAS,CACfC,MAAM,CAAE,SAAS,CACjBC,MAAM,CAAE,IACV,CAAC,CAAC,CACF8B,WAAW,CAAE3C,MAAM,CAAC,CAAAZ,IAAI,cAAJA,IAAI,CAAEa,KAAK,GAAI,EAAE,CACvC,CAAC,CACD,GAAM,CAAAqD,SAAS,IAAAjC,MAAA,IAAAC,mBAAA,CAAA5D,OAAA,EAAOsF,OAAO,GAAEK,KAAK,EAAC,CACrC3E,WAAW,CAAC4E,SAAS,CAAC,CACtBvC,oBAAW,CAACe,OAAO,CAAC,eAAe,CAAEZ,IAAI,CAACa,SAAS,CAACuB,SAAS,CAAC,CAAC,CACjE,CACF,CAAE,MAAOtG,CAAC,CAAE,CACViF,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEhF,CAAC,CAAC,CAC7C,CACF,CAAC,iBA9CK,CAAA4F,WAAWA,CAAA,SAAAC,KAAA,CAAAX,KAAA,MAAAC,SAAA,OA8ChB,CAGD,GAAM,CAAAoB,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAIvG,CAAyC,CAAK,CACjE,GAAM,CAAAwG,QAAQ,CAAGxG,CAAC,CAACyG,MAAM,CACzBD,QAAQ,CAACP,KAAK,CAACC,MAAM,CAAG,KAAK,CAC7B,GAAM,CAAAzD,YAAY,CAAG+D,QAAQ,CAAC/D,YAAY,CAG1C,GAAM,CAAAiE,SAAS,CAAGC,IAAI,CAACC,GAAG,CAACnE,YAAY,CAAE,GAAG,CAAC,CAC7C+D,QAAQ,CAACP,KAAK,CAACC,MAAM,CAAG,GAAGQ,SAAS,IAAI,CAExC5E,QAAQ,CAAC0E,QAAQ,CAACK,KAAK,CAAC,CAC1B,CAAC,CAED,MACE,CAAAvH,MAAA,CAAAoB,OAAA,CAAAoG,aAAA,QAAKb,KAAK,CAAEc,MAAM,CAACC,OAAQ,EACzB1H,MAAA,CAAAoB,OAAA,CAAAoG,aAAA,CAAChH,aAAA,CAAAY,OAAY,EAACuG,KAAK,CAAC,+BAAqB,CAAE,CAAC,CAG5C3H,MAAA,CAAAoB,OAAA,CAAAoG,aAAA,QAAKb,KAAK,CAAEc,MAAM,CAACG,aAAc,EAC/B5H,MAAA,CAAAoB,OAAA,CAAAoG,aAAA,QAAKK,GAAG,CAAEpF,OAAQ,CAACkE,KAAK,CAAEc,MAAM,CAACK,WAAY,EAC1C3F,QAAQ,CAAC4B,GAAG,CAAC,SAACC,GAAG,QAChB,CAAAhE,MAAA,CAAAoB,OAAA,CAAAoG,aAAA,QACEO,GAAG,CAAE/D,GAAG,CAACsB,EAAG,CACZqB,KAAK,CAAAhF,MAAA,CAAAsC,MAAA,IACAwD,MAAM,CAACO,aAAa,CACnBhE,GAAG,CAACoC,MAAM,GAAK,MAAM,CACrBqB,MAAM,CAACQ,UAAU,CACjBR,MAAM,CAACS,aAAa,CACxB,EAEFlI,MAAA,CAAAoB,OAAA,CAAAoG,aAAA,MAAGb,KAAK,CAAEc,MAAM,CAACU,WAAY,EAAEnE,GAAG,CAACmC,IAAQ,CAAC,CAC5CnG,MAAA,CAAAoB,OAAA,CAAAoG,aAAA,SAAMb,KAAK,CAAEc,MAAM,CAACvD,SAAU,EAAEF,GAAG,CAACE,SAAgB,CACjD,CAAC,EACP,CACE,CAAC,CAGNlE,MAAA,CAAAoB,OAAA,CAAAoG,aAAA,QAAKb,KAAK,CAAEc,MAAM,CAACW,SAAU,EAC3BpI,MAAA,CAAAoB,OAAA,CAAAoG,aAAA,aACEK,GAAG,CAAElF,QAAS,CACd4E,KAAK,CAAEhF,KAAM,CACb8F,QAAQ,CAAEpB,WAAY,CACtBqB,WAAW,CAAC,mBAAmB,CAC/B3B,KAAK,CAAEc,MAAM,CAAClF,KAAM,CACpBgG,IAAI,CAAE,CAAE,CACT,CAAC,CACFvI,MAAA,CAAAoB,OAAA,CAAAoG,aAAA,WACEgB,OAAO,CAAElC,WAAY,CACrBmC,QAAQ,CAAE,CAAClG,KAAK,CAACiE,IAAI,CAAC,CAAE,CACxBG,KAAK,CAAAhF,MAAA,CAAAsC,MAAA,IACAwD,MAAM,CAACiB,UAAU,EACpBC,OAAO,CAAEpG,KAAK,CAACiE,IAAI,CAAC,CAAC,CAAG,CAAC,CAAG,GAAG,CAC/BoC,MAAM,CAAErG,KAAK,CAACiE,IAAI,CAAC,CAAC,CAAG,SAAS,CAAG,aAAa,EAChD,EAEFxG,MAAA,CAAAoB,OAAA,CAAAoG,aAAA,CAACrH,QAAQ,CAAC0I,YAAY,EAACC,IAAI,CAAE,EAAG,CAACC,KAAK,CAAC,OAAO,CAAE,CAC1C,CACL,CACF,CACF,CAAC,CAEV,CAAC,CAGD,GAAM,CAAAtB,MAA2C,CAAG,CAClDC,OAAO,CAAE,CACPd,MAAM,CAAE,OAAO,CACfoC,OAAO,CAAE,MAAM,CACfC,aAAa,CAAE,QAAQ,CACvBC,UAAU,CAAE,oDAAoD,CAChEC,QAAQ,CAAE,QACZ,CAAC,CACDvB,aAAa,CAAE,CACbwB,IAAI,CAAE,CAAC,CACPJ,OAAO,CAAE,MAAM,CACfC,aAAa,CAAE,QAAQ,CACvBI,cAAc,CAAE,eAAe,CAC/BC,OAAO,CAAE,EAAE,CACXC,QAAQ,CAAE,GAAG,CACbC,MAAM,CAAE,QAAQ,CAChBC,KAAK,CAAE,KAAK,CACZP,UAAU,CAAE,uBAAuB,CACnCQ,YAAY,CAAE,EAAE,CAChBC,cAAc,CAAE,YAAY,CAC5BC,SAAS,CAAE,6BACb,CAAC,CACD9B,WAAW,CAAE,CACXsB,IAAI,CAAE,CAAC,CACPS,SAAS,CAAE,MAAM,CACjBP,OAAO,CAAE,UAAU,CACnBN,OAAO,CAAE,MAAM,CACfC,aAAa,CAAE,QAAQ,CACvBa,GAAG,CAAE,EAAE,CACPC,cAAc,CAAE,MAClB,CAAC,CACD/B,aAAa,CAAE,CACbuB,QAAQ,CAAE,KAAK,CACfD,OAAO,CAAE,UAAU,CACnBI,YAAY,CAAE,EAAE,CAChBE,SAAS,CAAE,2BAA2B,CACtCI,UAAU,CAAE,UACd,CAAC,CACD/B,UAAU,CAAE,CACVgC,SAAS,CAAE,UAAU,CACrBf,UAAU,CAAE,2CAA2C,CACvDH,KAAK,CAAE,OAAO,CACdmB,uBAAuB,CAAE,CAC3B,CAAC,CACDhC,aAAa,CAAE,CACb+B,SAAS,CAAE,YAAY,CACvBE,eAAe,CAAE,uBAAuB,CACxCpB,KAAK,CAAE,MAAM,CACbqB,sBAAsB,CAAE,CAC1B,CAAC,CACDjC,WAAW,CAAE,CACXqB,MAAM,CAAE,CAAC,CACTa,QAAQ,CAAE,EAAE,CACZC,UAAU,CAAE,CAAC,CACbC,UAAU,CAAEC,gBAAK,CAACC,OACpB,CAAC,CACDvG,SAAS,CAAE,CACT8E,OAAO,CAAE,OAAO,CAChB0B,SAAS,CAAE,CAAC,CACZL,QAAQ,CAAE,EAAE,CACZ1B,OAAO,CAAE,GAAG,CACZgC,SAAS,CAAE,OACb,CAAC,CACDvC,SAAS,CAAE,CACTY,OAAO,CAAE,MAAM,CACf4B,UAAU,CAAE,QAAQ,CACpBd,GAAG,CAAE,EAAE,CACPK,eAAe,CAAE,uBAAuB,CACxCb,OAAO,CAAE,SAAS,CAClBI,YAAY,CAAE,EAAE,CAChBE,SAAS,CAAE,2BAEb,CAAC,CACDrH,KAAK,CAAE,CACL6G,IAAI,CAAE,CAAC,CACPyB,MAAM,CAAE,MAAM,CACdnB,YAAY,CAAE,EAAE,CAChBJ,OAAO,CAAE,SAAS,CAClBe,QAAQ,CAAE,EAAE,CACZS,OAAO,CAAE,MAAM,CACfP,UAAU,CAAEC,gBAAK,CAACC,OAAO,CACzBN,eAAe,CAAE,aAAa,CAC9BpB,KAAK,CAAE,MAAM,CACbgC,MAAM,CAAE,MAAM,CACdlB,SAAS,CAAE,MAAM,CACjBmB,SAAS,CAAE,OACb,CAAC,CACDtC,UAAU,CAAE,CACVmC,MAAM,CAAE,MAAM,CACd3B,UAAU,CAAE,2CAA2C,CACvDQ,YAAY,CAAE,KAAK,CACnBJ,OAAO,CAAE,CAAC,CACVN,OAAO,CAAE,MAAM,CACf4B,UAAU,CAAE,QAAQ,CACpBvB,cAAc,CAAE,QAAQ,CACxB4B,UAAU,CAAE,eACd,CACF,CAAC,CAAC,IAAAC,QAAA,CAAAC,OAAA,CAAA/J,OAAA,CAEaU,eAAe","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}