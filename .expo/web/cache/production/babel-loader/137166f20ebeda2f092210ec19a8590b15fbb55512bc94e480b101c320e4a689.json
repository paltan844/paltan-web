{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.useLocationStorePincode=exports.useLocationStore=void 0;var _asyncToGenerator2=_interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));var _productService=require(\"../service/productService\");var _zustand=require(\"zustand\");var _storage=require(\"./storage\");var initialSelectedLocation=_storage.mmkvStorage.getItem('selectedLocation')||'';var rawSelectedLocationObject=_storage.mmkvStorage.getItem('selectedLocationObject');var parsedSelectedLocationObject=null;try{parsedSelectedLocationObject=rawSelectedLocationObject?JSON.parse(rawSelectedLocationObject):null;}catch(e){console.warn('⚠️ MMKV parse error for selectedLocationObject',e);}var useLocationStore=exports.useLocationStore=(0,_zustand.create)(function(set,_get){return{selectedLocation:initialSelectedLocation,selectedLocationObject:parsedSelectedLocationObject,setSelectedLocation:function setSelectedLocation(location){set({selectedLocation:location});_storage.mmkvStorage.setItem('selectedLocation',location!=null?location:'');},setSelectedLocationObject:function setSelectedLocationObject(obj){set({selectedLocationObject:obj});if(obj&&typeof obj==='object'){_storage.mmkvStorage.setItem('selectedLocationObject',JSON.stringify(obj));}},resetLocation:function resetLocation(){set({selectedLocation:'',selectedLocationObject:null});_storage.mmkvStorage.removeItem('selectedLocation');_storage.mmkvStorage.removeItem('selectedLocationObject');}};});var useLocationStorePincode=exports.useLocationStorePincode=(0,_zustand.create)(function(set,get){return{locationData:[],setLocationData:function setLocationData(data){return set({locationData:data});},fetchLocationData:function(){var _fetchLocationData=(0,_asyncToGenerator2.default)(function*(){if(get().locationData.length===0){var data=yield(0,_productService.getLocationData)();if(data){set({locationData:data});}}});function fetchLocationData(){return _fetchLocationData.apply(this,arguments);}return fetchLocationData;}()};});","map":{"version":3,"names":["_productService","require","_zustand","_storage","initialSelectedLocation","mmkvStorage","getItem","rawSelectedLocationObject","parsedSelectedLocationObject","JSON","parse","e","console","warn","useLocationStore","exports","create","set","_get","selectedLocation","selectedLocationObject","setSelectedLocation","location","setItem","setSelectedLocationObject","obj","stringify","resetLocation","removeItem","useLocationStorePincode","get","locationData","setLocationData","data","fetchLocationData","_fetchLocationData","_asyncToGenerator2","default","length","getLocationData","apply","arguments"],"sources":["C:/Users/acer/Desktop/paltanweb/src/state/locationStore.tsx"],"sourcesContent":["import { getLocationData } from '@service/productService';\r\nimport { create } from 'zustand';\r\nimport { mmkvStorage } from './storage';\r\n\r\ntype LocationState = {\r\n  selectedLocation: string;\r\n  selectedLocationObject: Record<string, any> | null;\r\n  setSelectedLocation: (location: string) => void;\r\n  setSelectedLocationObject: (locationObj: Record<string, any>) => void;\r\n  resetLocation: () => void;\r\n};\r\n\r\ninterface LocationStore {\r\n  locationData: any[];\r\n  setLocationData: (data: any[]) => void;\r\n  fetchLocationData: () => Promise<void>;\r\n}\r\n\r\n\r\nconst initialSelectedLocation = mmkvStorage.getItem('selectedLocation') || '';\r\nconst rawSelectedLocationObject = mmkvStorage.getItem('selectedLocationObject');\r\n\r\n\r\nlet parsedSelectedLocationObject = null;\r\ntry {\r\n  parsedSelectedLocationObject = rawSelectedLocationObject\r\n    ? JSON.parse(rawSelectedLocationObject)\r\n    : null;\r\n} catch (e) {\r\n  console.warn('⚠️ MMKV parse error for selectedLocationObject', e);\r\n}\r\n\r\nexport const useLocationStore = create<LocationState & {\r\n  resetLocation: () => void;\r\n  selectedLocationObject: any;\r\n  setSelectedLocationObject: (obj: any) => void;\r\n}>((set, _get) => ({\r\n  selectedLocation: initialSelectedLocation,\r\n  selectedLocationObject: parsedSelectedLocationObject,\r\n\r\n  setSelectedLocation: (location) => {\r\n    set({ selectedLocation: location });\r\n    mmkvStorage.setItem('selectedLocation', location ?? '');\r\n  },\r\n\r\n  setSelectedLocationObject: (obj) => {\r\n    set({ selectedLocationObject: obj });\r\n    if (obj && typeof obj === 'object') {\r\n      mmkvStorage.setItem('selectedLocationObject', JSON.stringify(obj));\r\n    }\r\n  },\r\n\r\n  resetLocation: () => {\r\n    set({ selectedLocation: '', selectedLocationObject: null });\r\n    mmkvStorage.removeItem('selectedLocation');\r\n    mmkvStorage.removeItem('selectedLocationObject');\r\n  },\r\n}));\r\n\r\n\r\n\r\nexport const useLocationStorePincode = create<LocationStore>((set, get) => ({\r\n  locationData: [],\r\n  setLocationData: (data) => set({ locationData: data }),\r\n  fetchLocationData: async () => {\r\n    if (get().locationData.length === 0) {\r\n      const data = await getLocationData();\r\n      if (data) {\r\n        set({ locationData: data });\r\n      }\r\n    }\r\n  },\r\n}));\r\n"],"mappings":"8SAAA,IAAAA,eAAA,CAAAC,OAAA,8BACA,IAAAC,QAAA,CAAAD,OAAA,YACA,IAAAE,QAAA,CAAAF,OAAA,cAiBA,GAAM,CAAAG,uBAAuB,CAAGC,oBAAW,CAACC,OAAO,CAAC,kBAAkB,CAAC,EAAI,EAAE,CAC7E,GAAM,CAAAC,yBAAyB,CAAGF,oBAAW,CAACC,OAAO,CAAC,wBAAwB,CAAC,CAG/E,GAAI,CAAAE,4BAA4B,CAAG,IAAI,CACvC,GAAI,CACFA,4BAA4B,CAAGD,yBAAyB,CACpDE,IAAI,CAACC,KAAK,CAACH,yBAAyB,CAAC,CACrC,IAAI,CACV,CAAE,MAAOI,CAAC,CAAE,CACVC,OAAO,CAACC,IAAI,CAAC,gDAAgD,CAAEF,CAAC,CAAC,CACnE,CAEO,GAAM,CAAAG,gBAAgB,CAAAC,OAAA,CAAAD,gBAAA,CAAG,GAAAE,eAAM,EAInC,SAACC,GAAG,CAAEC,IAAI,QAAM,CACjBC,gBAAgB,CAAEf,uBAAuB,CACzCgB,sBAAsB,CAAEZ,4BAA4B,CAEpDa,mBAAmB,CAAE,QAArB,CAAAA,mBAAmBA,CAAGC,QAAQ,CAAK,CACjCL,GAAG,CAAC,CAAEE,gBAAgB,CAAEG,QAAS,CAAC,CAAC,CACnCjB,oBAAW,CAACkB,OAAO,CAAC,kBAAkB,CAAED,QAAQ,OAARA,QAAQ,CAAI,EAAE,CAAC,CACzD,CAAC,CAEDE,yBAAyB,CAAE,QAA3B,CAAAA,yBAAyBA,CAAGC,GAAG,CAAK,CAClCR,GAAG,CAAC,CAAEG,sBAAsB,CAAEK,GAAI,CAAC,CAAC,CACpC,GAAIA,GAAG,EAAI,MAAO,CAAAA,GAAG,GAAK,QAAQ,CAAE,CAClCpB,oBAAW,CAACkB,OAAO,CAAC,wBAAwB,CAAEd,IAAI,CAACiB,SAAS,CAACD,GAAG,CAAC,CAAC,CACpE,CACF,CAAC,CAEDE,aAAa,CAAE,QAAf,CAAAA,aAAaA,CAAA,CAAQ,CACnBV,GAAG,CAAC,CAAEE,gBAAgB,CAAE,EAAE,CAAEC,sBAAsB,CAAE,IAAK,CAAC,CAAC,CAC3Df,oBAAW,CAACuB,UAAU,CAAC,kBAAkB,CAAC,CAC1CvB,oBAAW,CAACuB,UAAU,CAAC,wBAAwB,CAAC,CAClD,CACF,CAAC,EAAC,CAAC,CAII,GAAM,CAAAC,uBAAuB,CAAAd,OAAA,CAAAc,uBAAA,CAAG,GAAAb,eAAM,EAAgB,SAACC,GAAG,CAAEa,GAAG,QAAM,CAC1EC,YAAY,CAAE,EAAE,CAChBC,eAAe,CAAE,QAAjB,CAAAA,eAAeA,CAAGC,IAAI,QAAK,CAAAhB,GAAG,CAAC,CAAEc,YAAY,CAAEE,IAAK,CAAC,CAAC,GACtDC,iBAAiB,gBAAAC,kBAAA,IAAAC,kBAAA,CAAAC,OAAA,EAAE,WAAY,CAC7B,GAAIP,GAAG,CAAC,CAAC,CAACC,YAAY,CAACO,MAAM,GAAK,CAAC,CAAE,CACnC,GAAM,CAAAL,IAAI,MAAS,GAAAM,+BAAe,EAAC,CAAC,CACpC,GAAIN,IAAI,CAAE,CACRhB,GAAG,CAAC,CAAEc,YAAY,CAAEE,IAAK,CAAC,CAAC,CAC7B,CACF,CACF,CAAC,UAPD,CAAAC,iBAAiBA,CAAA,SAAAC,kBAAA,CAAAK,KAAA,MAAAC,SAAA,SAAjB,CAAAP,iBAAiB,IAQnB,CAAC,EAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}