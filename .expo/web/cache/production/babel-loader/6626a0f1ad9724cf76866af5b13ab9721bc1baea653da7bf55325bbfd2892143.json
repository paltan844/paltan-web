{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _slicedToArray2=_interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));var _react=_interopRequireWildcard(require(\"react\"));var _reactNative=require(\"react-native\");var _cartStore=require(\"../../state/cartStore\");var _CartAnimationWrapper=_interopRequireDefault(require(\"./CartAnimationWrapper\"));var _CartSummary=_interopRequireDefault(require(\"./CartSummary\"));function _interopRequireWildcard(e,t){if(\"function\"==typeof WeakMap)var r=new WeakMap(),n=new WeakMap();return(_interopRequireWildcard=function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;var o,i,f={__proto__:null,default:e};if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return f;if(o=t?n:r){if(o.has(e))return o.get(e);o.set(e,f);}for(var _t in e)\"default\"!==_t&&{}.hasOwnProperty.call(e,_t)&&((i=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,_t))&&(i.get||i.set)?o(f,_t,i):f[_t]=e[_t]);return f;})(e,t);}var MAIN_TAB_PATHS=[\"/\",\"/categories\",\"/kart\",\"/profile\"];var WithCart=function WithCart(WrappedComponent){var WithCartComponent=function WithCartComponent(props){var _cart$,_cart$$item;var cart=(0,_cartStore.useCartStore)(function(state){return state.cart;});var cartCount=cart.reduce(function(acc,item){return acc+item.count;},0);var _useState=(0,_react.useState)(0),_useState2=(0,_slicedToArray2.default)(_useState,2),footerHeight=_useState2[0],setFooterHeight=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=(0,_slicedToArray2.default)(_useState3,2),isMainTabScreen=_useState4[0],setIsMainTabScreen=_useState4[1];var handleFooterLayout=function handleFooterLayout(e){setFooterHeight(e.nativeEvent.layout.height);};(0,_react.useEffect)(function(){if(_reactNative.Platform.OS===\"web\"){var checkRoute=function checkRoute(){var currentPath=window.location.pathname;var insideMainTabs=MAIN_TAB_PATHS.some(function(path){return currentPath===path;});setIsMainTabScreen(insideMainTabs);};checkRoute();window.addEventListener(\"popstate\",checkRoute);return function(){return window.removeEventListener(\"popstate\",checkRoute);};}},[]);return _react.default.createElement(_reactNative.View,{style:styles.wrapper},_react.default.createElement(_reactNative.View,{style:[styles.content,{marginBottom:footerHeight}]},_react.default.createElement(WrappedComponent,props)),cartCount>0&&_react.default.createElement(_reactNative.View,{style:[styles.footerWrapper,{bottom:_reactNative.Platform.OS===\"web\"?isMainTabScreen?45:0:0}],onLayout:handleFooterLayout},_react.default.createElement(_CartAnimationWrapper.default,{cartCount:cartCount},_react.default.createElement(_CartSummary.default,{cartCount:cartCount,cartImage:(cart==null?void 0:(_cart$=cart[0])==null?void 0:(_cart$$item=_cart$.item)==null?void 0:_cart$$item.image)||null}))));};return WithCartComponent;};var styles=_reactNative.StyleSheet.create({wrapper:{flex:1,backgroundColor:\"#fff\",position:\"relative\"},content:{flex:1},footerWrapper:{position:_reactNative.Platform.OS===\"web\"?\"fixed\":\"absolute\",left:0,right:0,backgroundColor:\"#fff\",zIndex:3000,boxShadow:_reactNative.Platform.OS===\"web\"?\"0 -2px 6px rgba(0,0,0,0.1)\":undefined,shadowColor:\"#000\",shadowOffset:{width:0,height:-2},shadowOpacity:0.1,shadowRadius:4,elevation:6}});var _default=exports.default=WithCart;","map":{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_cartStore","_CartAnimationWrapper","_interopRequireDefault","_CartSummary","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","MAIN_TAB_PATHS","WithCart","WrappedComponent","WithCartComponent","props","_cart$","_cart$$item","cart","useCartStore","state","cartCount","reduce","acc","item","count","_useState","useState","_useState2","_slicedToArray2","footerHeight","setFooterHeight","_useState3","_useState4","isMainTabScreen","setIsMainTabScreen","handleFooterLayout","nativeEvent","layout","height","useEffect","Platform","OS","checkRoute","currentPath","window","location","pathname","insideMainTabs","some","path","addEventListener","removeEventListener","createElement","View","style","styles","wrapper","content","marginBottom","footerWrapper","bottom","onLayout","cartImage","image","StyleSheet","create","flex","backgroundColor","position","left","right","zIndex","boxShadow","undefined","shadowColor","shadowOffset","width","shadowOpacity","shadowRadius","elevation","_default","exports"],"sources":["C:/Users/acer/Desktop/paltanweb/src/features/cart/WithCart.tsx"],"sourcesContent":["import React, { FC, useState, useEffect } from \"react\";\r\nimport { View, StyleSheet, LayoutChangeEvent, Platform } from \"react-native\";\r\nimport { useCartStore } from \"@state/cartStore\";\r\nimport CartAnimationWrapper from \"./CartAnimationWrapper\";\r\nimport CartSummary from \"./CartSummary\";\r\n\r\n// ✅ Define all routes that show the bottom tab bar\r\nconst MAIN_TAB_PATHS = [\"/\", \"/categories\", \"/kart\", \"/profile\"];\r\n\r\nconst WithCart = <P extends object>(WrappedComponent: React.ComponentType<P>) => {\r\n  const WithCartComponent: FC<P> = (props) => {\r\n    const cart = useCartStore((state) => state.cart);\r\n    const cartCount = cart.reduce((acc, item) => acc + item.count, 0);\r\n    const [footerHeight, setFooterHeight] = useState(0);\r\n    const [isMainTabScreen, setIsMainTabScreen] = useState(false);\r\n\r\n    const handleFooterLayout = (e: LayoutChangeEvent) => {\r\n      setFooterHeight(e.nativeEvent.layout.height);\r\n    };\r\n\r\n    // ✅ Detect route on web dynamically\r\n    useEffect(() => {\r\n      if (Platform.OS === \"web\") {\r\n        const checkRoute = () => {\r\n          const currentPath = window.location.pathname;\r\n          const insideMainTabs = MAIN_TAB_PATHS.some((path) =>\r\n            currentPath === path\r\n          );\r\n          setIsMainTabScreen(insideMainTabs);\r\n        };\r\n\r\n        checkRoute();\r\n        window.addEventListener(\"popstate\", checkRoute);\r\n        return () => window.removeEventListener(\"popstate\", checkRoute);\r\n      }\r\n    }, []);\r\n\r\n    return (\r\n      <View style={styles.wrapper}>\r\n        {/* ✅ Main content area */}\r\n        <View style={[styles.content, { marginBottom: footerHeight }]}>\r\n          <WrappedComponent {...props} />\r\n        </View>\r\n\r\n        {/* ✅ Cart summary footer */}\r\n        {cartCount > 0 && (\r\n          <View\r\n            style={[\r\n              styles.footerWrapper,\r\n              {\r\n                bottom:\r\n                  Platform.OS === \"web\"\r\n                    ? isMainTabScreen\r\n                      ? 45 // show above MainTabs\r\n                      : 0 // stick to bottom otherwise\r\n                    : 0,\r\n              },\r\n            ]}\r\n            onLayout={handleFooterLayout}\r\n          >\r\n            <CartAnimationWrapper cartCount={cartCount}>\r\n              <CartSummary\r\n                cartCount={cartCount}\r\n                cartImage={cart?.[0]?.item?.image || null}\r\n              />\r\n            </CartAnimationWrapper>\r\n          </View>\r\n        )}\r\n      </View>\r\n    );\r\n  };\r\n\r\n  return WithCartComponent;\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  wrapper: {\r\n    flex: 1,\r\n    backgroundColor: \"#fff\",\r\n    position: \"relative\",\r\n  },\r\n  content: {\r\n    flex: 1,\r\n  },\r\n  footerWrapper: {\r\n    position: Platform.OS === \"web\" ? \"fixed\" : \"absolute\",\r\n    left: 0,\r\n    right: 0,\r\n    backgroundColor: \"#fff\",\r\n    zIndex: 3000, // ✅ ensures it's above MainTabs (1000)\r\n    boxShadow: Platform.OS === \"web\" ? \"0 -2px 6px rgba(0,0,0,0.1)\" : undefined,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: -2 },\r\n    shadowOpacity: 0.1,\r\n    shadowRadius: 4,\r\n    elevation: 6,\r\n  },\r\n});\r\n\r\nexport default WithCart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}