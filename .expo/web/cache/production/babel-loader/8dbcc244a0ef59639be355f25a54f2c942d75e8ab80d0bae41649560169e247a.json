{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.useCategoryStore=void 0;var _asyncToGenerator2=_interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));var _zustand=require(\"zustand\");var _productService=require(\"../service/productService\");var useCategoryStore=exports.useCategoryStore=(0,_zustand.create)(function(set,get){return{categories:[],loading:true,initialized:false,fetchCategories:function(){var _fetchCategories=(0,_asyncToGenerator2.default)(function*(){if(get().initialized)return;try{set({loading:true});var data=yield(0,_productService.getMainCategories)();set({categories:data,initialized:true});}catch(err){console.error('❌ Category fetch error:',err);set({categories:[]});}finally{set({loading:false});}});function fetchCategories(){return _fetchCategories.apply(this,arguments);}return fetchCategories;}(),reloadCategories:function(){var _reloadCategories=(0,_asyncToGenerator2.default)(function*(){try{set({loading:true});var data=yield(0,_productService.getMainCategories)();set({categories:data,initialized:true});}catch(err){console.error('❌ Category reload error:',err);set({categories:[]});}finally{set({loading:false});}});function reloadCategories(){return _reloadCategories.apply(this,arguments);}return reloadCategories;}()};});","map":{"version":3,"names":["_zustand","require","_productService","useCategoryStore","exports","create","set","get","categories","loading","initialized","fetchCategories","_fetchCategories","_asyncToGenerator2","default","data","getMainCategories","err","console","error","apply","arguments","reloadCategories","_reloadCategories"],"sources":["C:/Users/acer/Desktop/paltanweb/src/state/categoryStore.tsx"],"sourcesContent":["// src/state/categoryStore.ts\r\nimport { create } from 'zustand';\r\nimport { getMainCategories } from '@service/productService';\r\n\r\ninterface Category {\r\n  id: string;\r\n  name: string;\r\n  icon: string;\r\n}\r\n\r\ninterface CategoryState {\r\n  categories: Category[];\r\n  loading: boolean;\r\n  initialized: boolean;\r\n  fetchCategories: () => Promise<void>;\r\n  reloadCategories: () => Promise<void>;\r\n}\r\n\r\nexport const useCategoryStore = create<CategoryState>((set, get) => ({\r\n  categories: [],\r\n  loading: true,\r\n  initialized: false,\r\n\r\n  fetchCategories: async () => {\r\n    if (get().initialized) return; // Already fetched\r\n    try {\r\n      set({ loading: true });\r\n      const data = await getMainCategories();\r\n      set({ categories: data, initialized: true });\r\n    } catch (err) {\r\n      console.error('❌ Category fetch error:', err);\r\n      set({ categories: [] });\r\n    } finally {\r\n      set({ loading: false });\r\n    }\r\n  },\r\n\r\n  reloadCategories: async () => {\r\n    try {\r\n      set({ loading: true });\r\n      const data = await getMainCategories();\r\n      set({ categories: data, initialized: true });\r\n    } catch (err) {\r\n      console.error('❌ Category reload error:', err);\r\n      set({ categories: [] });\r\n    } finally {\r\n      set({ loading: false });\r\n    }\r\n  },\r\n}));\r\n"],"mappings":"8QACA,IAAAA,QAAA,CAAAC,OAAA,YACA,IAAAC,eAAA,CAAAD,OAAA,8BAgBO,GAAM,CAAAE,gBAAgB,CAAAC,OAAA,CAAAD,gBAAA,CAAG,GAAAE,eAAM,EAAgB,SAACC,GAAG,CAAEC,GAAG,QAAM,CACnEC,UAAU,CAAE,EAAE,CACdC,OAAO,CAAE,IAAI,CACbC,WAAW,CAAE,KAAK,CAElBC,eAAe,gBAAAC,gBAAA,IAAAC,kBAAA,CAAAC,OAAA,EAAE,WAAY,CAC3B,GAAIP,GAAG,CAAC,CAAC,CAACG,WAAW,CAAE,OACvB,GAAI,CACFJ,GAAG,CAAC,CAAEG,OAAO,CAAE,IAAK,CAAC,CAAC,CACtB,GAAM,CAAAM,IAAI,MAAS,GAAAC,iCAAiB,EAAC,CAAC,CACtCV,GAAG,CAAC,CAAEE,UAAU,CAAEO,IAAI,CAAEL,WAAW,CAAE,IAAK,CAAC,CAAC,CAC9C,CAAE,MAAOO,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,yBAAyB,CAAEF,GAAG,CAAC,CAC7CX,GAAG,CAAC,CAAEE,UAAU,CAAE,EAAG,CAAC,CAAC,CACzB,CAAC,OAAS,CACRF,GAAG,CAAC,CAAEG,OAAO,CAAE,KAAM,CAAC,CAAC,CACzB,CACF,CAAC,UAZD,CAAAE,eAAeA,CAAA,SAAAC,gBAAA,CAAAQ,KAAA,MAAAC,SAAA,SAAf,CAAAV,eAAe,IAYd,CAEDW,gBAAgB,gBAAAC,iBAAA,IAAAV,kBAAA,CAAAC,OAAA,EAAE,WAAY,CAC5B,GAAI,CACFR,GAAG,CAAC,CAAEG,OAAO,CAAE,IAAK,CAAC,CAAC,CACtB,GAAM,CAAAM,IAAI,MAAS,GAAAC,iCAAiB,EAAC,CAAC,CACtCV,GAAG,CAAC,CAAEE,UAAU,CAAEO,IAAI,CAAEL,WAAW,CAAE,IAAK,CAAC,CAAC,CAC9C,CAAE,MAAOO,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,0BAA0B,CAAEF,GAAG,CAAC,CAC9CX,GAAG,CAAC,CAAEE,UAAU,CAAE,EAAG,CAAC,CAAC,CACzB,CAAC,OAAS,CACRF,GAAG,CAAC,CAAEG,OAAO,CAAE,KAAM,CAAC,CAAC,CACzB,CACF,CAAC,UAXD,CAAAa,gBAAgBA,CAAA,SAAAC,iBAAA,CAAAH,KAAA,MAAAC,SAAA,SAAhB,CAAAC,gBAAgB,IAYlB,CAAC,EAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}