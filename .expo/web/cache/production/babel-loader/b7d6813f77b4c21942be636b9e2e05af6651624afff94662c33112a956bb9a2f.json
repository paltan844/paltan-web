{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.useBannerStore=void 0;var _asyncToGenerator2=_interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));var _zustand=require(\"zustand\");var _productService=require(\"../service/productService\");var useBannerStore=exports.useBannerStore=(0,_zustand.create)(function(set,get){return{banners:[],loading:false,initialized:false,fetchBanners:function(){var _fetchBanners=(0,_asyncToGenerator2.default)(function*(){var _get=get(),initialized=_get.initialized;if(initialized){return;}try{set({loading:true});var data=yield(0,_productService.getBanners)();if(Array.isArray(data)){set({banners:data,initialized:true});}else{console.warn('⚠️ Unexpected banner data:',data);}}catch(err){console.error('❌ Banner fetch error:',err);set({banners:[]});}finally{set({loading:false});}});function fetchBanners(){return _fetchBanners.apply(this,arguments);}return fetchBanners;}(),reloadBanners:function(){var _reloadBanners=(0,_asyncToGenerator2.default)(function*(){try{set({loading:true});var data=yield(0,_productService.getBanners)();if(Array.isArray(data)){set({banners:data,initialized:true});}}catch(err){console.error('❌ Banner reload error:',err);set({banners:[]});}finally{set({loading:false});}});function reloadBanners(){return _reloadBanners.apply(this,arguments);}return reloadBanners;}()};});","map":{"version":3,"names":["_zustand","require","_productService","useBannerStore","exports","create","set","get","banners","loading","initialized","fetchBanners","_fetchBanners","_asyncToGenerator2","default","_get","data","getBanners","Array","isArray","console","warn","err","error","apply","arguments","reloadBanners","_reloadBanners"],"sources":["C:/Users/acer/Desktop/paltanweb/src/state/bannerStore.tsx"],"sourcesContent":["// src/state/bannerStore.ts\r\nimport { create } from 'zustand';\r\nimport { getBanners } from '@service/productService';\r\n\r\ninterface BannerItem {\r\n  id: string;\r\n  title: string;\r\n  icon?: string;\r\n}\r\n\r\ninterface BannerState {\r\n  banners: BannerItem[];\r\n  loading: boolean;\r\n  initialized: boolean;\r\n  fetchBanners: () => Promise<void>;\r\n  reloadBanners: () => Promise<void>;\r\n}\r\n\r\nexport const useBannerStore = create<BannerState>((set, get) => ({\r\n  banners: [],\r\n  loading: false,\r\n  initialized: false,\r\n\r\n  fetchBanners: async () => {\r\n    const { initialized } = get();\r\n    if (initialized) {return;} // ✅ only once\r\n\r\n    try {\r\n      set({ loading: true });\r\n      const data = await getBanners();\r\n      if (Array.isArray(data)) {\r\n        set({ banners: data, initialized: true });\r\n      } else {\r\n        console.warn('⚠️ Unexpected banner data:', data);\r\n      }\r\n    } catch (err) {\r\n      console.error('❌ Banner fetch error:', err);\r\n      set({ banners: [] });\r\n    } finally {\r\n      set({ loading: false });\r\n    }\r\n  },\r\n\r\n  reloadBanners: async () => {\r\n    try {\r\n      set({ loading: true });\r\n      const data = await getBanners();\r\n      if (Array.isArray(data)) {\r\n        set({ banners: data, initialized: true });\r\n      }\r\n    } catch (err) {\r\n      console.error('❌ Banner reload error:', err);\r\n      set({ banners: [] });\r\n    } finally {\r\n      set({ loading: false });\r\n    }\r\n  },\r\n}));\r\n"],"mappings":"4QACA,IAAAA,QAAA,CAAAC,OAAA,YACA,IAAAC,eAAA,CAAAD,OAAA,8BAgBO,GAAM,CAAAE,cAAc,CAAAC,OAAA,CAAAD,cAAA,CAAG,GAAAE,eAAM,EAAc,SAACC,GAAG,CAAEC,GAAG,QAAM,CAC/DC,OAAO,CAAE,EAAE,CACXC,OAAO,CAAE,KAAK,CACdC,WAAW,CAAE,KAAK,CAElBC,YAAY,gBAAAC,aAAA,IAAAC,kBAAA,CAAAC,OAAA,EAAE,WAAY,CACxB,IAAAC,IAAA,CAAwBR,GAAG,CAAC,CAAC,CAArBG,WAAW,CAAAK,IAAA,CAAXL,WAAW,CACnB,GAAIA,WAAW,CAAE,CAAC,OAAO,CAEzB,GAAI,CACFJ,GAAG,CAAC,CAAEG,OAAO,CAAE,IAAK,CAAC,CAAC,CACtB,GAAM,CAAAO,IAAI,MAAS,GAAAC,0BAAU,EAAC,CAAC,CAC/B,GAAIC,KAAK,CAACC,OAAO,CAACH,IAAI,CAAC,CAAE,CACvBV,GAAG,CAAC,CAAEE,OAAO,CAAEQ,IAAI,CAAEN,WAAW,CAAE,IAAK,CAAC,CAAC,CAC3C,CAAC,IAAM,CACLU,OAAO,CAACC,IAAI,CAAC,4BAA4B,CAAEL,IAAI,CAAC,CAClD,CACF,CAAE,MAAOM,GAAG,CAAE,CACZF,OAAO,CAACG,KAAK,CAAC,uBAAuB,CAAED,GAAG,CAAC,CAC3ChB,GAAG,CAAC,CAAEE,OAAO,CAAE,EAAG,CAAC,CAAC,CACtB,CAAC,OAAS,CACRF,GAAG,CAAC,CAAEG,OAAO,CAAE,KAAM,CAAC,CAAC,CACzB,CACF,CAAC,UAlBD,CAAAE,YAAYA,CAAA,SAAAC,aAAA,CAAAY,KAAA,MAAAC,SAAA,SAAZ,CAAAd,YAAY,IAkBX,CAEDe,aAAa,gBAAAC,cAAA,IAAAd,kBAAA,CAAAC,OAAA,EAAE,WAAY,CACzB,GAAI,CACFR,GAAG,CAAC,CAAEG,OAAO,CAAE,IAAK,CAAC,CAAC,CACtB,GAAM,CAAAO,IAAI,MAAS,GAAAC,0BAAU,EAAC,CAAC,CAC/B,GAAIC,KAAK,CAACC,OAAO,CAACH,IAAI,CAAC,CAAE,CACvBV,GAAG,CAAC,CAAEE,OAAO,CAAEQ,IAAI,CAAEN,WAAW,CAAE,IAAK,CAAC,CAAC,CAC3C,CACF,CAAE,MAAOY,GAAG,CAAE,CACZF,OAAO,CAACG,KAAK,CAAC,wBAAwB,CAAED,GAAG,CAAC,CAC5ChB,GAAG,CAAC,CAAEE,OAAO,CAAE,EAAG,CAAC,CAAC,CACtB,CAAC,OAAS,CACRF,GAAG,CAAC,CAAEG,OAAO,CAAE,KAAM,CAAC,CAAC,CACzB,CACF,CAAC,UAbD,CAAAiB,aAAaA,CAAA,SAAAC,cAAA,CAAAH,KAAA,MAAAC,SAAA,SAAb,CAAAC,aAAa,IAcf,CAAC,EAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}