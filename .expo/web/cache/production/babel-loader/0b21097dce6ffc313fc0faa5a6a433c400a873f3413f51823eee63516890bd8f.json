{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.deviceInfoEmitter=void 0;exports.useOnEvent=useOnEvent;exports.useOnMount=useOnMount;var _asyncToGenerator2=_interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));var _slicedToArray2=_interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));var _react=require(\"react\");var _reactNative=require(\"react-native\");function useOnMount(asyncGetter,initialResult){var _useState=(0,_react.useState)({loading:true,result:initialResult}),_useState2=(0,_slicedToArray2.default)(_useState,2),response=_useState2[0],setResponse=_useState2[1];(0,_react.useEffect)(function(){var getAsync=function(){var _ref=(0,_asyncToGenerator2.default)(function*(){var result=yield asyncGetter();setResponse({loading:false,result:result});});return function getAsync(){return _ref.apply(this,arguments);};}();getAsync();},[asyncGetter]);return response;}var deviceInfoEmitter=exports.deviceInfoEmitter=new _reactNative.NativeEventEmitter(_reactNative.NativeModules.RNDeviceInfo);function useOnEvent(eventName,initialValueAsyncGetter,defaultValue){var _useOnMount=useOnMount(initialValueAsyncGetter,defaultValue),loading=_useOnMount.loading,initialResult=_useOnMount.result;var _useState3=(0,_react.useState)(defaultValue),_useState4=(0,_slicedToArray2.default)(_useState3,2),result=_useState4[0],setResult=_useState4[1];(0,_react.useEffect)(function(){setResult(initialResult);},[initialResult]);(0,_react.useEffect)(function(){var subscription=deviceInfoEmitter.addListener(eventName,setResult);return function(){return subscription.remove();};},[eventName]);return(0,_react.useMemo)(function(){return{loading:loading,result:result};},[loading,result]);}","map":{"version":3,"names":["_react","require","_reactNative","useOnMount","asyncGetter","initialResult","_useState","useState","loading","result","_useState2","_slicedToArray2","default","response","setResponse","useEffect","getAsync","_ref","_asyncToGenerator2","apply","arguments","deviceInfoEmitter","exports","NativeEventEmitter","NativeModules","RNDeviceInfo","useOnEvent","eventName","initialValueAsyncGetter","defaultValue","_useOnMount","_useState3","_useState4","setResult","subscription","addListener","remove","useMemo"],"sources":["C:\\Users\\acer\\Desktop\\paltanweb\\node_modules\\react-native-device-info\\lib\\module\\internal\\asyncHookWrappers.ts"],"sourcesContent":["import { useState, useEffect, useMemo } from 'react';\nimport { NativeEventEmitter, NativeModules } from 'react-native';\nimport type { AsyncHookResult } from './types';\n\n/**\n * simple hook wrapper for async functions for 'on-mount / componentDidMount' that only need to fired once\n * @param asyncGetter async function that 'gets' something\n * @param initialResult -1 | false | 'unknown'\n */\nexport function useOnMount<T>(asyncGetter: () => Promise<T>, initialResult: T): AsyncHookResult<T> {\n  const [response, setResponse] = useState<AsyncHookResult<T>>({\n    loading: true,\n    result: initialResult,\n  });\n\n  useEffect(() => {\n    // async function cuz react complains if useEffect's effect param is an async function\n    const getAsync = async () => {\n      const result = await asyncGetter();\n      setResponse({ loading: false, result });\n    };\n\n    getAsync();\n  }, [asyncGetter]);\n\n  return response;\n}\n\nexport const deviceInfoEmitter = new NativeEventEmitter(NativeModules.RNDeviceInfo);\n\n/**\n * simple hook wrapper for handling events\n * @param eventName\n * @param initialValueAsyncGetter\n * @param defaultValue\n */\nexport function useOnEvent<T>(\n  eventName: string,\n  initialValueAsyncGetter: () => Promise<T>,\n  defaultValue: T\n): AsyncHookResult<T> {\n  const { loading, result: initialResult } = useOnMount(initialValueAsyncGetter, defaultValue);\n  const [result, setResult] = useState<T>(defaultValue);\n\n  // sets the result to what the intial value is on mount\n  useEffect(() => {\n    setResult(initialResult);\n  }, [initialResult]);\n\n  // - set up the event listener to set the result\n  // - set up the clean up function to remove subscription on unmount\n  useEffect(() => {\n    const subscription = deviceInfoEmitter.addListener(eventName, setResult);\n    return () => subscription.remove();\n  }, [eventName]);\n\n  // loading will only be true while getting the inital value. After that, it will always be false, but a new result may occur\n  return useMemo(() => ({ loading, result }), [loading, result]);\n}\n"],"mappings":"uaAAA,IAAAA,MAAA,CAAAC,OAAA,UACA,IAAAC,YAAA,CAAAD,OAAA,iBAQO,QAAS,CAAAE,UAATA,CAAuBC,WAAvB,CAAsDC,aAAtD,CAA4F,CACjG,IAAAC,SAAA,CAAgC,GAAAC,eAAQ,EAAqB,CAC3DC,OAAO,CAAE,IADkD,CAE3DC,MAAM,CAAEJ,aAFmD,CAArB,CAAxC,CAAAK,UAAA,IAAAC,eAAA,CAAAC,OAAA,EAAAN,SAAA,IAAOO,QAAD,CAAAH,UAAA,IAAWI,WAAX,CAAAJ,UAAA,IAKN,GAAAK,gBAAS,EAAC,UAAM,CAEd,GAAM,CAAAC,QAAQ,gBAAAC,IAAA,IAAAC,kBAAA,CAAAN,OAAA,EAAG,WAAY,CAC3B,GAAM,CAAAH,MAAM,MAAS,CAAAL,WAAW,EAAhC,CACAU,WAAW,CAAC,CAAEN,OAAO,CAAE,KAAX,CAAkBC,MAAA,CAAAA,MAAlB,CAAD,CAAX,CACD,CAHD,iBAAM,CAAAO,QAAQA,CAAA,SAAAC,IAAA,CAAAE,KAAA,MAAAC,SAAA,OAAd,CAKAJ,QAAQ,GACT,CARQ,CAQN,CAACZ,WAAD,CARM,CAAT,CAUA,MAAO,CAAAS,QAAP,CACD,CAEM,GAAM,CAAAQ,iBAAiB,CAAAC,OAAA,CAAAD,iBAAA,CAAG,GAAI,CAAAE,+BAAJ,CAAuBC,0BAAa,CAACC,YAArC,CAA1B,CAQA,QAAS,CAAAC,UAATA,CACLC,SADK,CAELC,uBAFK,CAGLC,YAHK,CAIe,CACpB,IAAAC,WAAA,CAA2C3B,UAAU,CAACyB,uBAAD,CAA0BC,YAA1B,CAArD,CAAQrB,OAAF,CAAAsB,WAAA,CAAEtB,OAAF,CAAmBH,aAAA,CAAAyB,WAAA,CAARrB,MAAM,CACvB,IAAAsB,UAAA,CAA4B,GAAAxB,eAAQ,EAAIsB,YAAJ,CAApC,CAAAG,UAAA,IAAArB,eAAA,CAAAC,OAAA,EAAAmB,UAAA,IAAOtB,MAAD,CAAAuB,UAAA,IAASC,SAAT,CAAAD,UAAA,IAGN,GAAAjB,gBAAS,EAAC,UAAM,CACdkB,SAAS,CAAC5B,aAAD,CAAT,CACD,CAFQ,CAEN,CAACA,aAAD,CAFM,CAAT,CAMA,GAAAU,gBAAS,EAAC,UAAM,CACd,GAAM,CAAAmB,YAAY,CAAGb,iBAAiB,CAACc,WAAlB,CAA8BR,SAA9B,CAAyCM,SAAzC,CAArB,CACA,MAAO,kBAAM,CAAAC,YAAY,CAACE,MAAb,EAAb,GACD,CAHQ,CAGN,CAACT,SAAD,CAHM,CAAT,CAMA,MAAO,GAAAU,cAAO,EAAC,iBAAO,CAAE7B,OAAF,CAAEA,OAAF,CAAWC,MAAA,CAAAA,MAAX,CAAP,EAAD,CAA8B,CAACD,OAAD,CAAUC,MAAV,CAA9B,CAAd,CACD","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}