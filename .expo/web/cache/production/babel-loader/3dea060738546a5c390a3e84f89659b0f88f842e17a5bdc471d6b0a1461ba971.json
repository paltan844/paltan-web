{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.refresh_tokens=exports.customerLogin=void 0;var _asyncToGenerator2=_interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));var _axios=_interopRequireDefault(require(\"axios\"));var _config=require(\"./config\");var customerLogin=exports.customerLogin=function(){var _ref=(0,_asyncToGenerator2.default)(function*(phone,fullName){var response=yield _axios.default.post(`${_config.BASE_URL}/customer/login`,{phone:phone,fullName:fullName});var _response$data=response.data,accessToken=_response$data.accessToken,refreshToken=_response$data.refreshToken,customer=_response$data.customer;localStorage.setItem(\"accessToken\",accessToken);localStorage.setItem(\"refreshToken\",refreshToken);return customer;});return function customerLogin(_x,_x2){return _ref.apply(this,arguments);};}();var refresh_tokens=exports.refresh_tokens=function(){var _ref2=(0,_asyncToGenerator2.default)(function*(){try{var refreshToken=localStorage.getItem(\"refreshToken\");if(!refreshToken)throw new Error(\"No refresh token found\");var response=yield _axios.default.post(`${_config.BASE_URL}/refresh-token`,{refreshToken:refreshToken});var _response$data2=response.data,accessToken=_response$data2.accessToken,newRefreshToken=_response$data2.refreshToken;localStorage.setItem(\"accessToken\",accessToken);localStorage.setItem(\"refreshToken\",newRefreshToken);return accessToken;}catch(error){console.warn(\"Failed to refresh tokens:\",error);localStorage.clear();window.location.href=\"/login\";return null;}});return function refresh_tokens(){return _ref2.apply(this,arguments);};}();","map":{"version":3,"names":["_axios","_interopRequireDefault","require","_config","customerLogin","exports","_ref","_asyncToGenerator2","default","phone","fullName","response","axios","post","BASE_URL","_response$data","data","accessToken","refreshToken","customer","localStorage","setItem","_x","_x2","apply","arguments","refresh_tokens","_ref2","getItem","Error","_response$data2","newRefreshToken","error","console","warn","clear","window","location","href"],"sources":["C:/Users/acer/Desktop/paltanweb/src/service/authService.tsx"],"sourcesContent":["import axios from \"axios\";\r\nimport { BASE_URL } from \"./config\";\r\n\r\n// ✅ Login API\r\nexport const customerLogin = async (phone: string, fullName: string) => {\r\n  const response = await axios.post(`${BASE_URL}/customer/login`, {\r\n    phone,\r\n    fullName,\r\n  });\r\n\r\n  const { accessToken, refreshToken, customer } = response.data;\r\n\r\n  localStorage.setItem(\"accessToken\", accessToken);\r\n  localStorage.setItem(\"refreshToken\", refreshToken);\r\n\r\n  return customer;\r\n};\r\n\r\n// ✅ Refresh Tokens\r\nexport const refresh_tokens = async (): Promise<string | null> => {\r\n  try {\r\n    const refreshToken = localStorage.getItem(\"refreshToken\");\r\n    if (!refreshToken) throw new Error(\"No refresh token found\");\r\n\r\n    const response = await axios.post(`${BASE_URL}/refresh-token`, {\r\n      refreshToken,\r\n    });\r\n\r\n    const { accessToken, refreshToken: newRefreshToken } = response.data;\r\n\r\n    localStorage.setItem(\"accessToken\", accessToken);\r\n    localStorage.setItem(\"refreshToken\", newRefreshToken);\r\n\r\n    return accessToken;\r\n  } catch (error) {\r\n    console.warn(\"Failed to refresh tokens:\", error);\r\n    localStorage.clear();\r\n    window.location.href = \"/login\";\r\n    return null;\r\n  }\r\n};\r\n"],"mappings":"kSAAA,IAAAA,MAAA,CAAAC,sBAAA,CAAAC,OAAA,WACA,IAAAC,OAAA,CAAAD,OAAA,aAGO,GAAM,CAAAE,aAAa,CAAAC,OAAA,CAAAD,aAAA,gBAAAE,IAAA,IAAAC,kBAAA,CAAAC,OAAA,EAAG,UAAOC,KAAa,CAAEC,QAAgB,CAAK,CACtE,GAAM,CAAAC,QAAQ,MAAS,CAAAC,cAAK,CAACC,IAAI,CAAC,GAAGC,gBAAQ,iBAAiB,CAAE,CAC9DL,KAAK,CAALA,KAAK,CACLC,QAAQ,CAARA,QACF,CAAC,CAAC,CAEF,IAAAK,cAAA,CAAgDJ,QAAQ,CAACK,IAAI,CAArDC,WAAW,CAAAF,cAAA,CAAXE,WAAW,CAAEC,YAAY,CAAAH,cAAA,CAAZG,YAAY,CAAEC,QAAQ,CAAAJ,cAAA,CAARI,QAAQ,CAE3CC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAEJ,WAAW,CAAC,CAChDG,YAAY,CAACC,OAAO,CAAC,cAAc,CAAEH,YAAY,CAAC,CAElD,MAAO,CAAAC,QAAQ,CACjB,CAAC,iBAZY,CAAAf,aAAaA,CAAAkB,EAAA,CAAAC,GAAA,SAAAjB,IAAA,CAAAkB,KAAA,MAAAC,SAAA,OAYzB,CAGM,GAAM,CAAAC,cAAc,CAAArB,OAAA,CAAAqB,cAAA,gBAAAC,KAAA,IAAApB,kBAAA,CAAAC,OAAA,EAAG,WAAoC,CAChE,GAAI,CACF,GAAM,CAAAU,YAAY,CAAGE,YAAY,CAACQ,OAAO,CAAC,cAAc,CAAC,CACzD,GAAI,CAACV,YAAY,CAAE,KAAM,IAAI,CAAAW,KAAK,CAAC,wBAAwB,CAAC,CAE5D,GAAM,CAAAlB,QAAQ,MAAS,CAAAC,cAAK,CAACC,IAAI,CAAC,GAAGC,gBAAQ,gBAAgB,CAAE,CAC7DI,YAAY,CAAZA,YACF,CAAC,CAAC,CAEF,IAAAY,eAAA,CAAuDnB,QAAQ,CAACK,IAAI,CAA5DC,WAAW,CAAAa,eAAA,CAAXb,WAAW,CAAgBc,eAAe,CAAAD,eAAA,CAA7BZ,YAAY,CAEjCE,YAAY,CAACC,OAAO,CAAC,aAAa,CAAEJ,WAAW,CAAC,CAChDG,YAAY,CAACC,OAAO,CAAC,cAAc,CAAEU,eAAe,CAAC,CAErD,MAAO,CAAAd,WAAW,CACpB,CAAE,MAAOe,KAAK,CAAE,CACdC,OAAO,CAACC,IAAI,CAAC,2BAA2B,CAAEF,KAAK,CAAC,CAChDZ,YAAY,CAACe,KAAK,CAAC,CAAC,CACpBC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,QAAQ,CAC/B,MAAO,KAAI,CACb,CACF,CAAC,iBArBY,CAAAZ,cAAcA,CAAA,SAAAC,KAAA,CAAAH,KAAA,MAAAC,SAAA,OAqB1B","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}