{"ast":null,"code":"Object.defineProperty(exports,\"__esModule\",{value:true});exports.useAuthStore=void 0;var _zustand=require(\"zustand\");var _middleware=require(\"zustand/middleware\");var _storage=require(\"./storage\");var useAuthStore=exports.useAuthStore=(0,_zustand.create)()((0,_middleware.persist)(function(set,get){return{user:null,currentOrder:null,setUser:function setUser(user){console.log(\"üü¢ setUser called with:\",user);set({user:user});},setCurrentOrder:function setCurrentOrder(order){console.log(\"üü¢ setCurrentOrder:\",order);set({currentOrder:order});},logout:function logout(){console.log(\"üî¥ [Logout Triggered] ‚Äî clearing Zustand + localStorage...\");set({user:null,currentOrder:null});try{localStorage.removeItem(\"auth-storage\");console.log(\"üßπ localStorage: auth-storage removed ‚úÖ\");sessionStorage.clear();console.log(\"üßπ sessionStorage cleared ‚úÖ\");_storage.mmkvStorage.clearAll();console.log(\"üßπ mmkvStorage cleared ‚úÖ\");console.log(\"üì¶ Remaining localStorage keys:\",Object.keys(localStorage));}catch(error){console.warn(\"‚ö†Ô∏è Logout error:\",error);}console.log(\"‚úÖ Logout complete ‚Äî Zustand user state should be null:\",get().user);}};},{name:\"auth-storage\",storage:(0,_middleware.createJSONStorage)(function(){return{getItem:function getItem(key){var value=localStorage.getItem(key);console.log(\"üì• getItem:\",key,value);return value;},setItem:function setItem(key,value){console.log(\"üì§ setItem:\",key,value);localStorage.setItem(key,value);},removeItem:function removeItem(key){console.log(\"üóëÔ∏è removeItem:\",key);localStorage.removeItem(key);}};})}));","map":{"version":3,"names":["_zustand","require","_middleware","_storage","useAuthStore","exports","create","persist","set","get","user","currentOrder","setUser","console","log","setCurrentOrder","order","logout","localStorage","removeItem","sessionStorage","clear","mmkvStorage","clearAll","Object","keys","error","warn","name","storage","createJSONStorage","getItem","key","value","setItem"],"sources":["C:/Users/acer/Desktop/paltanweb/src/state/authStore.tsx"],"sourcesContent":["import { create } from \"zustand\";\r\nimport { persist, createJSONStorage } from \"zustand/middleware\";\r\nimport { mmkvStorage } from \"./storage\";\r\n\r\ninterface AuthStore {\r\n  user: Record<string, any> | null;\r\n  currentOrder: Record<string, any> | null;\r\n  setUser: (user: any) => void;\r\n  setCurrentOrder: (order: any) => void;\r\n  logout: () => void;\r\n}\r\n\r\nexport const useAuthStore = create<AuthStore>()(\r\n  persist(\r\n    (set, get) => ({\r\n      user: null,\r\n      currentOrder: null,\r\n\r\n      setUser: (user) => {\r\n        console.log(\"üü¢ setUser called with:\", user);\r\n        set({ user });\r\n      },\r\n\r\n      setCurrentOrder: (order) => {\r\n        console.log(\"üü¢ setCurrentOrder:\", order);\r\n        set({ currentOrder: order });\r\n      },\r\n\r\n      logout: () => {\r\n        console.log(\"üî¥ [Logout Triggered] ‚Äî clearing Zustand + localStorage...\");\r\n\r\n        // Clear Zustand in-memory state\r\n        set({ user: null, currentOrder: null });\r\n\r\n        try {\r\n          // Clear persisted Zustand data\r\n          localStorage.removeItem(\"auth-storage\");\r\n          console.log(\"üßπ localStorage: auth-storage removed ‚úÖ\");\r\n\r\n          // Clear session\r\n          sessionStorage.clear();\r\n          console.log(\"üßπ sessionStorage cleared ‚úÖ\");\r\n\r\n          // Clear MMKV backup\r\n          mmkvStorage.clearAll();\r\n          console.log(\"üßπ mmkvStorage cleared ‚úÖ\");\r\n\r\n          // Debug log of remaining localStorage keys\r\n          console.log(\"üì¶ Remaining localStorage keys:\", Object.keys(localStorage));\r\n        } catch (error) {\r\n          console.warn(\"‚ö†Ô∏è Logout error:\", error);\r\n        }\r\n\r\n        console.log(\"‚úÖ Logout complete ‚Äî Zustand user state should be null:\", get().user);\r\n      },\r\n    }),\r\n    {\r\n      name: \"auth-storage\",\r\n      storage: createJSONStorage(() => ({\r\n        getItem: (key) => {\r\n          const value = localStorage.getItem(key);\r\n          console.log(\"üì• getItem:\", key, value);\r\n          return value;\r\n        },\r\n        setItem: (key, value) => {\r\n          console.log(\"üì§ setItem:\", key, value);\r\n          localStorage.setItem(key, value);\r\n        },\r\n        removeItem: (key) => {\r\n          console.log(\"üóëÔ∏è removeItem:\", key);\r\n          localStorage.removeItem(key);\r\n        },\r\n      })),\r\n    }\r\n  )\r\n);\r\n"],"mappings":"qFAAA,IAAAA,QAAA,CAAAC,OAAA,YACA,IAAAC,WAAA,CAAAD,OAAA,uBACA,IAAAE,QAAA,CAAAF,OAAA,cAUO,GAAM,CAAAG,YAAY,CAAAC,OAAA,CAAAD,YAAA,CAAG,GAAAE,eAAM,EAAY,CAAC,CAC7C,GAAAC,mBAAO,EACL,SAACC,GAAG,CAAEC,GAAG,QAAM,CACbC,IAAI,CAAE,IAAI,CACVC,YAAY,CAAE,IAAI,CAElBC,OAAO,CAAE,QAAT,CAAAA,OAAOA,CAAGF,IAAI,CAAK,CACjBG,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAEJ,IAAI,CAAC,CAC5CF,GAAG,CAAC,CAAEE,IAAI,CAAJA,IAAK,CAAC,CAAC,CACf,CAAC,CAEDK,eAAe,CAAE,QAAjB,CAAAA,eAAeA,CAAGC,KAAK,CAAK,CAC1BH,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAEE,KAAK,CAAC,CACzCR,GAAG,CAAC,CAAEG,YAAY,CAAEK,KAAM,CAAC,CAAC,CAC9B,CAAC,CAEDC,MAAM,CAAE,QAAR,CAAAA,MAAMA,CAAA,CAAQ,CACZJ,OAAO,CAACC,GAAG,CAAC,4DAA4D,CAAC,CAGzEN,GAAG,CAAC,CAAEE,IAAI,CAAE,IAAI,CAAEC,YAAY,CAAE,IAAK,CAAC,CAAC,CAEvC,GAAI,CAEFO,YAAY,CAACC,UAAU,CAAC,cAAc,CAAC,CACvCN,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAC,CAGtDM,cAAc,CAACC,KAAK,CAAC,CAAC,CACtBR,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC,CAG1CQ,oBAAW,CAACC,QAAQ,CAAC,CAAC,CACtBV,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC,CAGvCD,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAEU,MAAM,CAACC,IAAI,CAACP,YAAY,CAAC,CAAC,CAC3E,CAAE,MAAOQ,KAAK,CAAE,CACdb,OAAO,CAACc,IAAI,CAAC,kBAAkB,CAAED,KAAK,CAAC,CACzC,CAEAb,OAAO,CAACC,GAAG,CAAC,wDAAwD,CAAEL,GAAG,CAAC,CAAC,CAACC,IAAI,CAAC,CACnF,CACF,CAAC,EAAC,CACF,CACEkB,IAAI,CAAE,cAAc,CACpBC,OAAO,CAAE,GAAAC,6BAAiB,EAAC,iBAAO,CAChCC,OAAO,CAAE,QAAT,CAAAA,OAAOA,CAAGC,GAAG,CAAK,CAChB,GAAM,CAAAC,KAAK,CAAGf,YAAY,CAACa,OAAO,CAACC,GAAG,CAAC,CACvCnB,OAAO,CAACC,GAAG,CAAC,aAAa,CAAEkB,GAAG,CAAEC,KAAK,CAAC,CACtC,MAAO,CAAAA,KAAK,CACd,CAAC,CACDC,OAAO,CAAE,QAAT,CAAAA,OAAOA,CAAGF,GAAG,CAAEC,KAAK,CAAK,CACvBpB,OAAO,CAACC,GAAG,CAAC,aAAa,CAAEkB,GAAG,CAAEC,KAAK,CAAC,CACtCf,YAAY,CAACgB,OAAO,CAACF,GAAG,CAAEC,KAAK,CAAC,CAClC,CAAC,CACDd,UAAU,CAAE,QAAZ,CAAAA,UAAUA,CAAGa,GAAG,CAAK,CACnBnB,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAEkB,GAAG,CAAC,CACnCd,YAAY,CAACC,UAAU,CAACa,GAAG,CAAC,CAC9B,CACF,CAAC,EAAC,CACJ,CACF,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}