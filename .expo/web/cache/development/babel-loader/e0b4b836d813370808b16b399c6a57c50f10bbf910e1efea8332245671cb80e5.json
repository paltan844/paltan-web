{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _reactRouterDom = require(\"react-router-dom\");\nvar _productService = require(\"../../service/productService\");\nvar _storage = require(\"../../state/storage\");\nvar _Constants = require(\"../../utils/Constants\");\nvar _this = this,\n  _jsxFileName = \"C:\\\\Users\\\\acer\\\\Desktop\\\\paltanweb\\\\src\\\\features\\\\profile\\\\share.tsx\";\nfunction _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) \"default\" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }\nvar ShareScreen = function ShareScreen() {\n  var _useState = (0, _react.useState)(true),\n    _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n    loading = _useState2[0],\n    setLoading = _useState2[1];\n  var navigate = (0, _reactRouterDom.useNavigate)();\n  (0, _react.useEffect)(function () {\n    var fetchAndShare = function () {\n      var _ref = (0, _asyncToGenerator2.default)(function* () {\n        var link = _storage.mmkvStorage.getItem(\"shared_app_link\");\n        if (!link) {\n          link = yield (0, _productService.getAppLink)();\n          if (link) {\n            _storage.mmkvStorage.setItem(\"shared_app_link\", link);\n          }\n        }\n        if (!link) {\n          setLoading(false);\n          return;\n        }\n        try {\n          if (navigator.share) {\n            yield navigator.share({\n              title: \"Check out this amazing app!\",\n              text: \"Hey! Found this cool app, thought you'd like it.\",\n              url: link\n            });\n          } else {\n            yield navigator.clipboard.writeText(link);\n            alert(`Link copied to clipboard!\\n\\n${link}`);\n          }\n        } catch (error) {\n          console.error(\"❌ Share error:\", error);\n        } finally {\n          setLoading(false);\n          navigate(-1);\n        }\n      });\n      return function fetchAndShare() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    fetchAndShare();\n  }, [navigate]);\n  if (loading) {\n    return _react.default.createElement(\"div\", {\n      style: styles.overlay,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 7\n      }\n    }, _react.default.createElement(\"div\", {\n      style: styles.loader,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }\n    }), _react.default.createElement(\"p\", {\n      style: styles.text,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }, \"Preparing share link...\"));\n  }\n  return null;\n};\nvar styles = {\n  overlay: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    height: \"100vh\",\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n    color: \"white\",\n    fontFamily: \"system-ui, sans-serif\"\n  },\n  loader: {\n    width: \"40px\",\n    height: \"40px\",\n    border: `4px solid ${_Constants.Colors.whitetext}`,\n    borderTop: `4px solid ${_Constants.Colors.primary}`,\n    borderRadius: \"50%\",\n    animation: \"spin 1s linear infinite\"\n  },\n  text: {\n    marginTop: \"12px\",\n    fontSize: \"14px\"\n  }\n};\nvar styleSheet = document.createElement(\"style\");\nstyleSheet.innerHTML = `\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}`;\ndocument.head.appendChild(styleSheet);\nvar _default = exports.default = ShareScreen;","map":{"version":3,"names":["_react","_interopRequireWildcard","require","_reactRouterDom","_productService","_storage","_Constants","_this","_jsxFileName","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ShareScreen","_useState","useState","_useState2","_slicedToArray2","loading","setLoading","navigate","useNavigate","useEffect","fetchAndShare","_ref","_asyncToGenerator2","link","mmkvStorage","getItem","getAppLink","setItem","navigator","share","title","text","url","clipboard","writeText","alert","error","console","apply","arguments","createElement","style","styles","overlay","__self","__source","fileName","lineNumber","columnNumber","loader","display","flexDirection","alignItems","justifyContent","height","backgroundColor","color","fontFamily","width","border","Colors","whitetext","borderTop","primary","borderRadius","animation","marginTop","fontSize","styleSheet","document","innerHTML","head","appendChild","_default","exports"],"sources":["C:/Users/acer/Desktop/paltanweb/src/features/profile/share.tsx"],"sourcesContent":["import React, { FC, useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\"; // ✅ use navigate from react-router-dom\r\nimport { getAppLink } from \"@service/productService\";\r\nimport { mmkvStorage } from \"@state/storage\";\r\nimport { Colors } from \"@utils/Constants\";\r\n\r\nconst ShareScreen: FC = () => {\r\n  const [loading, setLoading] = useState(true);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchAndShare = async () => {\r\n      let link = mmkvStorage.getItem(\"shared_app_link\");\r\n\r\n      if (!link) {\r\n        link = await getAppLink();\r\n        if (link) {\r\n          mmkvStorage.setItem(\"shared_app_link\", link);\r\n        }\r\n      }\r\n\r\n      if (!link) {\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        // ✅ Use Web Share API if available\r\n        if (navigator.share) {\r\n          await navigator.share({\r\n            title: \"Check out this amazing app!\",\r\n            text: \"Hey! Found this cool app, thought you'd like it.\",\r\n            url: link,\r\n          });\r\n        } else {\r\n          // ✅ Fallback: copy link to clipboard and alert\r\n          await navigator.clipboard.writeText(link);\r\n          alert(`Link copied to clipboard!\\n\\n${link}`);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"❌ Share error:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n        // ✅ Navigate back to profile or home\r\n        navigate(-1);\r\n      }\r\n    };\r\n\r\n    fetchAndShare();\r\n  }, [navigate]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={styles.overlay}>\r\n        <div style={styles.loader} />\r\n        <p style={styles.text}>Preparing share link...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nconst styles: Record<string, React.CSSProperties> = {\r\n  overlay: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    height: \"100vh\",\r\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n    color: \"white\",\r\n    fontFamily: \"system-ui, sans-serif\",\r\n  },\r\n  loader: {\r\n    width: \"40px\",\r\n    height: \"40px\",\r\n    border: `4px solid ${Colors.whitetext}`,\r\n    borderTop: `4px solid ${Colors.primary}`,\r\n    borderRadius: \"50%\",\r\n    animation: \"spin 1s linear infinite\",\r\n  },\r\n  text: {\r\n    marginTop: \"12px\",\r\n    fontSize: \"14px\",\r\n  },\r\n};\r\n\r\n// ✅ Add simple spin animation for loader\r\nconst styleSheet = document.createElement(\"style\");\r\nstyleSheet.innerHTML = `\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}`;\r\ndocument.head.appendChild(styleSheet);\r\n\r\nexport default ShareScreen;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}