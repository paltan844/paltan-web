{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _reactNative = require(\"react-native\");\nvar _cartStore = require(\"../../state/cartStore\");\nvar _CartAnimationWrapper = _interopRequireDefault(require(\"./CartAnimationWrapper\"));\nvar _CartSummary = _interopRequireDefault(require(\"./CartSummary\"));\nvar _this = this,\n  _jsxFileName = \"C:\\\\Users\\\\acer\\\\Desktop\\\\paltanweb\\\\src\\\\features\\\\cart\\\\WithCart.tsx\";\nfunction _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) \"default\" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }\nvar MAIN_TAB_PATHS = [\"/\", \"/categories\", \"/kart\", \"/profile\"];\nvar WithCart = function WithCart(WrappedComponent) {\n  var WithCartComponent = function WithCartComponent(props) {\n    var _cart$, _cart$$item;\n    var cart = (0, _cartStore.useCartStore)(function (state) {\n      return state.cart;\n    });\n    var cartCount = cart.reduce(function (acc, item) {\n      return acc + item.count;\n    }, 0);\n    var _useState = (0, _react.useState)(0),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      footerHeight = _useState2[0],\n      setFooterHeight = _useState2[1];\n    var _useState3 = (0, _react.useState)(false),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      isMainTabScreen = _useState4[0],\n      setIsMainTabScreen = _useState4[1];\n    var handleFooterLayout = function handleFooterLayout(e) {\n      setFooterHeight(e.nativeEvent.layout.height);\n    };\n    (0, _react.useEffect)(function () {\n      if (_reactNative.Platform.OS === \"web\") {\n        var checkRoute = function checkRoute() {\n          var currentPath = window.location.pathname;\n          var insideMainTabs = MAIN_TAB_PATHS.some(function (path) {\n            return currentPath === path;\n          });\n          setIsMainTabScreen(insideMainTabs);\n        };\n        checkRoute();\n        window.addEventListener(\"popstate\", checkRoute);\n        return function () {\n          return window.removeEventListener(\"popstate\", checkRoute);\n        };\n      }\n    }, []);\n    return _react.default.createElement(_reactNative.View, {\n      style: styles.wrapper,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 7\n      }\n    }, _react.default.createElement(_reactNative.View, {\n      style: [styles.content, {\n        marginBottom: footerHeight\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }\n    }, _react.default.createElement(WrappedComponent, (0, _extends2.default)({}, props, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 11\n      }\n    }))), cartCount > 0 && _react.default.createElement(_reactNative.View, {\n      style: [styles.footerWrapper, {\n        bottom: _reactNative.Platform.OS === \"web\" ? isMainTabScreen ? 45 : 0 : 0\n      }],\n      onLayout: handleFooterLayout,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }\n    }, _react.default.createElement(_CartAnimationWrapper.default, {\n      cartCount: cartCount,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }\n    }, _react.default.createElement(_CartSummary.default, {\n      cartCount: cartCount,\n      cartImage: (cart == null ? void 0 : (_cart$ = cart[0]) == null ? void 0 : (_cart$$item = _cart$.item) == null ? void 0 : _cart$$item.image) || null,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 15\n      }\n    }))));\n  };\n  return WithCartComponent;\n};\nvar styles = _reactNative.StyleSheet.create({\n  wrapper: {\n    flex: 1,\n    backgroundColor: \"#fff\",\n    position: \"relative\"\n  },\n  content: {\n    flex: 1\n  },\n  footerWrapper: {\n    position: _reactNative.Platform.OS === \"web\" ? \"fixed\" : \"absolute\",\n    left: 0,\n    right: 0,\n    backgroundColor: \"#fff\",\n    zIndex: 3000,\n    boxShadow: _reactNative.Platform.OS === \"web\" ? \"0 -2px 6px rgba(0,0,0,0.1)\" : undefined,\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: -2\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 6\n  }\n});\nvar _default = exports.default = WithCart;","map":{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_cartStore","_CartAnimationWrapper","_interopRequireDefault","_CartSummary","_this","_jsxFileName","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","MAIN_TAB_PATHS","WithCart","WrappedComponent","WithCartComponent","props","_cart$","_cart$$item","cart","useCartStore","state","cartCount","reduce","acc","item","count","_useState","useState","_useState2","_slicedToArray2","footerHeight","setFooterHeight","_useState3","_useState4","isMainTabScreen","setIsMainTabScreen","handleFooterLayout","nativeEvent","layout","height","useEffect","Platform","OS","checkRoute","currentPath","window","location","pathname","insideMainTabs","some","path","addEventListener","removeEventListener","createElement","View","style","styles","wrapper","__self","__source","fileName","lineNumber","columnNumber","content","marginBottom","_extends2","footerWrapper","bottom","onLayout","cartImage","image","StyleSheet","create","flex","backgroundColor","position","left","right","zIndex","boxShadow","undefined","shadowColor","shadowOffset","width","shadowOpacity","shadowRadius","elevation","_default","exports"],"sources":["C:/Users/acer/Desktop/paltanweb/src/features/cart/WithCart.tsx"],"sourcesContent":["import React, { FC, useState, useEffect } from \"react\";\r\nimport { View, StyleSheet, LayoutChangeEvent, Platform } from \"react-native\";\r\nimport { useCartStore } from \"@state/cartStore\";\r\nimport CartAnimationWrapper from \"./CartAnimationWrapper\";\r\nimport CartSummary from \"./CartSummary\";\r\n\r\n// ✅ Define all routes that show the bottom tab bar\r\nconst MAIN_TAB_PATHS = [\"/\", \"/categories\", \"/kart\", \"/profile\"];\r\n\r\nconst WithCart = <P extends object>(WrappedComponent: React.ComponentType<P>) => {\r\n  const WithCartComponent: FC<P> = (props) => {\r\n    const cart = useCartStore((state) => state.cart);\r\n    const cartCount = cart.reduce((acc, item) => acc + item.count, 0);\r\n    const [footerHeight, setFooterHeight] = useState(0);\r\n    const [isMainTabScreen, setIsMainTabScreen] = useState(false);\r\n\r\n    const handleFooterLayout = (e: LayoutChangeEvent) => {\r\n      setFooterHeight(e.nativeEvent.layout.height);\r\n    };\r\n\r\n    // ✅ Detect route on web dynamically\r\n    useEffect(() => {\r\n      if (Platform.OS === \"web\") {\r\n        const checkRoute = () => {\r\n          const currentPath = window.location.pathname;\r\n          const insideMainTabs = MAIN_TAB_PATHS.some((path) =>\r\n            currentPath === path\r\n          );\r\n          setIsMainTabScreen(insideMainTabs);\r\n        };\r\n\r\n        checkRoute();\r\n        window.addEventListener(\"popstate\", checkRoute);\r\n        return () => window.removeEventListener(\"popstate\", checkRoute);\r\n      }\r\n    }, []);\r\n\r\n    return (\r\n      <View style={styles.wrapper}>\r\n        {/* ✅ Main content area */}\r\n        <View style={[styles.content, { marginBottom: footerHeight }]}>\r\n          <WrappedComponent {...props} />\r\n        </View>\r\n\r\n        {/* ✅ Cart summary footer */}\r\n        {cartCount > 0 && (\r\n          <View\r\n            style={[\r\n              styles.footerWrapper,\r\n              {\r\n                bottom:\r\n                  Platform.OS === \"web\"\r\n                    ? isMainTabScreen\r\n                      ? 45 // show above MainTabs\r\n                      : 0 // stick to bottom otherwise\r\n                    : 0,\r\n              },\r\n            ]}\r\n            onLayout={handleFooterLayout}\r\n          >\r\n            <CartAnimationWrapper cartCount={cartCount}>\r\n              <CartSummary\r\n                cartCount={cartCount}\r\n                cartImage={cart?.[0]?.item?.image || null}\r\n              />\r\n            </CartAnimationWrapper>\r\n          </View>\r\n        )}\r\n      </View>\r\n    );\r\n  };\r\n\r\n  return WithCartComponent;\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  wrapper: {\r\n    flex: 1,\r\n    backgroundColor: \"#fff\",\r\n    position: \"relative\",\r\n  },\r\n  content: {\r\n    flex: 1,\r\n  },\r\n  footerWrapper: {\r\n    position: Platform.OS === \"web\" ? \"fixed\" : \"absolute\",\r\n    left: 0,\r\n    right: 0,\r\n    backgroundColor: \"#fff\",\r\n    zIndex: 3000, // ✅ ensures it's above MainTabs (1000)\r\n    boxShadow: Platform.OS === \"web\" ? \"0 -2px 6px rgba(0,0,0,0.1)\" : undefined,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: -2 },\r\n    shadowOpacity: 0.1,\r\n    shadowRadius: 4,\r\n    elevation: 6,\r\n  },\r\n});\r\n\r\nexport default WithCart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}