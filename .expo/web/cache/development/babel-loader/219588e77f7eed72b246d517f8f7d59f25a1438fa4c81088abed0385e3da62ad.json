{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useAuthStore = void 0;\nvar _zustand = require(\"zustand\");\nvar _middleware = require(\"zustand/middleware\");\nvar _storage = require(\"./storage\");\nvar useAuthStore = exports.useAuthStore = (0, _zustand.create)()((0, _middleware.persist)(function (set, get) {\n  return {\n    user: null,\n    currentOrder: null,\n    setUser: function setUser(user) {\n      console.log(\"üü¢ setUser called with:\", user);\n      set({\n        user: user\n      });\n    },\n    setCurrentOrder: function setCurrentOrder(order) {\n      console.log(\"üü¢ setCurrentOrder:\", order);\n      set({\n        currentOrder: order\n      });\n    },\n    logout: function logout() {\n      console.log(\"üî¥ [Logout Triggered] ‚Äî clearing Zustand + localStorage...\");\n      set({\n        user: null,\n        currentOrder: null\n      });\n      try {\n        localStorage.removeItem(\"auth-storage\");\n        console.log(\"üßπ localStorage: auth-storage removed ‚úÖ\");\n        sessionStorage.clear();\n        console.log(\"üßπ sessionStorage cleared ‚úÖ\");\n        _storage.mmkvStorage.clearAll();\n        console.log(\"üßπ mmkvStorage cleared ‚úÖ\");\n        console.log(\"üì¶ Remaining localStorage keys:\", Object.keys(localStorage));\n      } catch (error) {\n        console.warn(\"‚ö†Ô∏è Logout error:\", error);\n      }\n      console.log(\"‚úÖ Logout complete ‚Äî Zustand user state should be null:\", get().user);\n    }\n  };\n}, {\n  name: \"auth-storage\",\n  storage: (0, _middleware.createJSONStorage)(function () {\n    return {\n      getItem: function getItem(key) {\n        var value = localStorage.getItem(key);\n        console.log(\"üì• getItem:\", key, value);\n        return value;\n      },\n      setItem: function setItem(key, value) {\n        console.log(\"üì§ setItem:\", key, value);\n        localStorage.setItem(key, value);\n      },\n      removeItem: function removeItem(key) {\n        console.log(\"üóëÔ∏è removeItem:\", key);\n        localStorage.removeItem(key);\n      }\n    };\n  })\n}));","map":{"version":3,"names":["_zustand","require","_middleware","_storage","useAuthStore","exports","create","persist","set","get","user","currentOrder","setUser","console","log","setCurrentOrder","order","logout","localStorage","removeItem","sessionStorage","clear","mmkvStorage","clearAll","Object","keys","error","warn","name","storage","createJSONStorage","getItem","key","value","setItem"],"sources":["C:/Users/acer/Desktop/paltanweb/src/state/authStore.tsx"],"sourcesContent":["import { create } from \"zustand\";\r\nimport { persist, createJSONStorage } from \"zustand/middleware\";\r\nimport { mmkvStorage } from \"./storage\";\r\n\r\ninterface AuthStore {\r\n  user: Record<string, any> | null;\r\n  currentOrder: Record<string, any> | null;\r\n  setUser: (user: any) => void;\r\n  setCurrentOrder: (order: any) => void;\r\n  logout: () => void;\r\n}\r\n\r\nexport const useAuthStore = create<AuthStore>()(\r\n  persist(\r\n    (set, get) => ({\r\n      user: null,\r\n      currentOrder: null,\r\n\r\n      setUser: (user) => {\r\n        console.log(\"üü¢ setUser called with:\", user);\r\n        set({ user });\r\n      },\r\n\r\n      setCurrentOrder: (order) => {\r\n        console.log(\"üü¢ setCurrentOrder:\", order);\r\n        set({ currentOrder: order });\r\n      },\r\n\r\n      logout: () => {\r\n        console.log(\"üî¥ [Logout Triggered] ‚Äî clearing Zustand + localStorage...\");\r\n\r\n        // Clear Zustand in-memory state\r\n        set({ user: null, currentOrder: null });\r\n\r\n        try {\r\n          // Clear persisted Zustand data\r\n          localStorage.removeItem(\"auth-storage\");\r\n          console.log(\"üßπ localStorage: auth-storage removed ‚úÖ\");\r\n\r\n          // Clear session\r\n          sessionStorage.clear();\r\n          console.log(\"üßπ sessionStorage cleared ‚úÖ\");\r\n\r\n          // Clear MMKV backup\r\n          mmkvStorage.clearAll();\r\n          console.log(\"üßπ mmkvStorage cleared ‚úÖ\");\r\n\r\n          // Debug log of remaining localStorage keys\r\n          console.log(\"üì¶ Remaining localStorage keys:\", Object.keys(localStorage));\r\n        } catch (error) {\r\n          console.warn(\"‚ö†Ô∏è Logout error:\", error);\r\n        }\r\n\r\n        console.log(\"‚úÖ Logout complete ‚Äî Zustand user state should be null:\", get().user);\r\n      },\r\n    }),\r\n    {\r\n      name: \"auth-storage\",\r\n      storage: createJSONStorage(() => ({\r\n        getItem: (key) => {\r\n          const value = localStorage.getItem(key);\r\n          console.log(\"üì• getItem:\", key, value);\r\n          return value;\r\n        },\r\n        setItem: (key, value) => {\r\n          console.log(\"üì§ setItem:\", key, value);\r\n          localStorage.setItem(key, value);\r\n        },\r\n        removeItem: (key) => {\r\n          console.log(\"üóëÔ∏è removeItem:\", key);\r\n          localStorage.removeItem(key);\r\n        },\r\n      })),\r\n    }\r\n  )\r\n);\r\n"],"mappings":";;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AACA,IAAAE,QAAA,GAAAF,OAAA;AAUO,IAAMG,YAAY,GAAAC,OAAA,CAAAD,YAAA,GAAG,IAAAE,eAAM,EAAY,CAAC,CAC7C,IAAAC,mBAAO,EACL,UAACC,GAAG,EAAEC,GAAG;EAAA,OAAM;IACbC,IAAI,EAAE,IAAI;IACVC,YAAY,EAAE,IAAI;IAElBC,OAAO,EAAE,SAATA,OAAOA,CAAGF,IAAI,EAAK;MACjBG,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEJ,IAAI,CAAC;MAC5CF,GAAG,CAAC;QAAEE,IAAI,EAAJA;MAAK,CAAC,CAAC;IACf,CAAC;IAEDK,eAAe,EAAE,SAAjBA,eAAeA,CAAGC,KAAK,EAAK;MAC1BH,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEE,KAAK,CAAC;MACzCR,GAAG,CAAC;QAAEG,YAAY,EAAEK;MAAM,CAAC,CAAC;IAC9B,CAAC;IAEDC,MAAM,EAAE,SAARA,MAAMA,CAAA,EAAQ;MACZJ,OAAO,CAACC,GAAG,CAAC,4DAA4D,CAAC;MAGzEN,GAAG,CAAC;QAAEE,IAAI,EAAE,IAAI;QAAEC,YAAY,EAAE;MAAK,CAAC,CAAC;MAEvC,IAAI;QAEFO,YAAY,CAACC,UAAU,CAAC,cAAc,CAAC;QACvCN,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAC;QAGtDM,cAAc,CAACC,KAAK,CAAC,CAAC;QACtBR,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;QAG1CQ,oBAAW,CAACC,QAAQ,CAAC,CAAC;QACtBV,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;QAGvCD,OAAO,CAACC,GAAG,CAAC,iCAAiC,EAAEU,MAAM,CAACC,IAAI,CAACP,YAAY,CAAC,CAAC;MAC3E,CAAC,CAAC,OAAOQ,KAAK,EAAE;QACdb,OAAO,CAACc,IAAI,CAAC,kBAAkB,EAAED,KAAK,CAAC;MACzC;MAEAb,OAAO,CAACC,GAAG,CAAC,wDAAwD,EAAEL,GAAG,CAAC,CAAC,CAACC,IAAI,CAAC;IACnF;EACF,CAAC;AAAA,CAAC,EACF;EACEkB,IAAI,EAAE,cAAc;EACpBC,OAAO,EAAE,IAAAC,6BAAiB,EAAC;IAAA,OAAO;MAChCC,OAAO,EAAE,SAATA,OAAOA,CAAGC,GAAG,EAAK;QAChB,IAAMC,KAAK,GAAGf,YAAY,CAACa,OAAO,CAACC,GAAG,CAAC;QACvCnB,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEkB,GAAG,EAAEC,KAAK,CAAC;QACtC,OAAOA,KAAK;MACd,CAAC;MACDC,OAAO,EAAE,SAATA,OAAOA,CAAGF,GAAG,EAAEC,KAAK,EAAK;QACvBpB,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEkB,GAAG,EAAEC,KAAK,CAAC;QACtCf,YAAY,CAACgB,OAAO,CAACF,GAAG,EAAEC,KAAK,CAAC;MAClC,CAAC;MACDd,UAAU,EAAE,SAAZA,UAAUA,CAAGa,GAAG,EAAK;QACnBnB,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEkB,GAAG,CAAC;QACnCd,YAAY,CAACC,UAAU,CAACa,GAAG,CAAC;MAC9B;IACF,CAAC;EAAA,CAAC;AACJ,CACF,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}