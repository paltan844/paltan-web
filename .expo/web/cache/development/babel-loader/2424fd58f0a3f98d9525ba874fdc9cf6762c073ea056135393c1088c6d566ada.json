{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useBannerStore = void 0;\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _zustand = require(\"zustand\");\nvar _productService = require(\"../service/productService\");\nvar useBannerStore = exports.useBannerStore = (0, _zustand.create)(function (set, get) {\n  return {\n    banners: [],\n    loading: false,\n    initialized: false,\n    fetchBanners: function () {\n      var _fetchBanners = (0, _asyncToGenerator2.default)(function* () {\n        var _get = get(),\n          initialized = _get.initialized;\n        if (initialized) {\n          return;\n        }\n        try {\n          set({\n            loading: true\n          });\n          var data = yield (0, _productService.getBanners)();\n          if (Array.isArray(data)) {\n            set({\n              banners: data,\n              initialized: true\n            });\n          } else {\n            console.warn('⚠️ Unexpected banner data:', data);\n          }\n        } catch (err) {\n          console.error('❌ Banner fetch error:', err);\n          set({\n            banners: []\n          });\n        } finally {\n          set({\n            loading: false\n          });\n        }\n      });\n      function fetchBanners() {\n        return _fetchBanners.apply(this, arguments);\n      }\n      return fetchBanners;\n    }(),\n    reloadBanners: function () {\n      var _reloadBanners = (0, _asyncToGenerator2.default)(function* () {\n        try {\n          set({\n            loading: true\n          });\n          var data = yield (0, _productService.getBanners)();\n          if (Array.isArray(data)) {\n            set({\n              banners: data,\n              initialized: true\n            });\n          }\n        } catch (err) {\n          console.error('❌ Banner reload error:', err);\n          set({\n            banners: []\n          });\n        } finally {\n          set({\n            loading: false\n          });\n        }\n      });\n      function reloadBanners() {\n        return _reloadBanners.apply(this, arguments);\n      }\n      return reloadBanners;\n    }()\n  };\n});","map":{"version":3,"names":["_zustand","require","_productService","useBannerStore","exports","create","set","get","banners","loading","initialized","fetchBanners","_fetchBanners","_asyncToGenerator2","default","_get","data","getBanners","Array","isArray","console","warn","err","error","apply","arguments","reloadBanners","_reloadBanners"],"sources":["C:/Users/acer/Desktop/paltanweb/src/state/bannerStore.tsx"],"sourcesContent":["// src/state/bannerStore.ts\r\nimport { create } from 'zustand';\r\nimport { getBanners } from '@service/productService';\r\n\r\ninterface BannerItem {\r\n  id: string;\r\n  title: string;\r\n  icon?: string;\r\n}\r\n\r\ninterface BannerState {\r\n  banners: BannerItem[];\r\n  loading: boolean;\r\n  initialized: boolean;\r\n  fetchBanners: () => Promise<void>;\r\n  reloadBanners: () => Promise<void>;\r\n}\r\n\r\nexport const useBannerStore = create<BannerState>((set, get) => ({\r\n  banners: [],\r\n  loading: false,\r\n  initialized: false,\r\n\r\n  fetchBanners: async () => {\r\n    const { initialized } = get();\r\n    if (initialized) {return;} // ✅ only once\r\n\r\n    try {\r\n      set({ loading: true });\r\n      const data = await getBanners();\r\n      if (Array.isArray(data)) {\r\n        set({ banners: data, initialized: true });\r\n      } else {\r\n        console.warn('⚠️ Unexpected banner data:', data);\r\n      }\r\n    } catch (err) {\r\n      console.error('❌ Banner fetch error:', err);\r\n      set({ banners: [] });\r\n    } finally {\r\n      set({ loading: false });\r\n    }\r\n  },\r\n\r\n  reloadBanners: async () => {\r\n    try {\r\n      set({ loading: true });\r\n      const data = await getBanners();\r\n      if (Array.isArray(data)) {\r\n        set({ banners: data, initialized: true });\r\n      }\r\n    } catch (err) {\r\n      console.error('❌ Banner reload error:', err);\r\n      set({ banners: [] });\r\n    } finally {\r\n      set({ loading: false });\r\n    }\r\n  },\r\n}));\r\n"],"mappings":";;;;;;AACA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,eAAA,GAAAD,OAAA;AAgBO,IAAME,cAAc,GAAAC,OAAA,CAAAD,cAAA,GAAG,IAAAE,eAAM,EAAc,UAACC,GAAG,EAAEC,GAAG;EAAA,OAAM;IAC/DC,OAAO,EAAE,EAAE;IACXC,OAAO,EAAE,KAAK;IACdC,WAAW,EAAE,KAAK;IAElBC,YAAY;MAAA,IAAAC,aAAA,OAAAC,kBAAA,CAAAC,OAAA,EAAE,aAAY;QACxB,IAAAC,IAAA,GAAwBR,GAAG,CAAC,CAAC;UAArBG,WAAW,GAAAK,IAAA,CAAXL,WAAW;QACnB,IAAIA,WAAW,EAAE;UAAC;QAAO;QAEzB,IAAI;UACFJ,GAAG,CAAC;YAAEG,OAAO,EAAE;UAAK,CAAC,CAAC;UACtB,IAAMO,IAAI,SAAS,IAAAC,0BAAU,EAAC,CAAC;UAC/B,IAAIC,KAAK,CAACC,OAAO,CAACH,IAAI,CAAC,EAAE;YACvBV,GAAG,CAAC;cAAEE,OAAO,EAAEQ,IAAI;cAAEN,WAAW,EAAE;YAAK,CAAC,CAAC;UAC3C,CAAC,MAAM;YACLU,OAAO,CAACC,IAAI,CAAC,4BAA4B,EAAEL,IAAI,CAAC;UAClD;QACF,CAAC,CAAC,OAAOM,GAAG,EAAE;UACZF,OAAO,CAACG,KAAK,CAAC,uBAAuB,EAAED,GAAG,CAAC;UAC3ChB,GAAG,CAAC;YAAEE,OAAO,EAAE;UAAG,CAAC,CAAC;QACtB,CAAC,SAAS;UACRF,GAAG,CAAC;YAAEG,OAAO,EAAE;UAAM,CAAC,CAAC;QACzB;MACF,CAAC;MAAA,SAlBDE,YAAYA,CAAA;QAAA,OAAAC,aAAA,CAAAY,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAZd,YAAY;IAAA,GAkBX;IAEDe,aAAa;MAAA,IAAAC,cAAA,OAAAd,kBAAA,CAAAC,OAAA,EAAE,aAAY;QACzB,IAAI;UACFR,GAAG,CAAC;YAAEG,OAAO,EAAE;UAAK,CAAC,CAAC;UACtB,IAAMO,IAAI,SAAS,IAAAC,0BAAU,EAAC,CAAC;UAC/B,IAAIC,KAAK,CAACC,OAAO,CAACH,IAAI,CAAC,EAAE;YACvBV,GAAG,CAAC;cAAEE,OAAO,EAAEQ,IAAI;cAAEN,WAAW,EAAE;YAAK,CAAC,CAAC;UAC3C;QACF,CAAC,CAAC,OAAOY,GAAG,EAAE;UACZF,OAAO,CAACG,KAAK,CAAC,wBAAwB,EAAED,GAAG,CAAC;UAC5ChB,GAAG,CAAC;YAAEE,OAAO,EAAE;UAAG,CAAC,CAAC;QACtB,CAAC,SAAS;UACRF,GAAG,CAAC;YAAEG,OAAO,EAAE;UAAM,CAAC,CAAC;QACzB;MACF,CAAC;MAAA,SAbDiB,aAAaA,CAAA;QAAA,OAAAC,cAAA,CAAAH,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAbC,aAAa;IAAA;EAcf,CAAC;AAAA,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}