{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useCategoryStore = void 0;\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _zustand = require(\"zustand\");\nvar _productService = require(\"../service/productService\");\nvar useCategoryStore = exports.useCategoryStore = (0, _zustand.create)(function (set, get) {\n  return {\n    categories: [],\n    loading: true,\n    initialized: false,\n    fetchCategories: function () {\n      var _fetchCategories = (0, _asyncToGenerator2.default)(function* () {\n        if (get().initialized) return;\n        try {\n          set({\n            loading: true\n          });\n          var data = yield (0, _productService.getMainCategories)();\n          set({\n            categories: data,\n            initialized: true\n          });\n        } catch (err) {\n          console.error('❌ Category fetch error:', err);\n          set({\n            categories: []\n          });\n        } finally {\n          set({\n            loading: false\n          });\n        }\n      });\n      function fetchCategories() {\n        return _fetchCategories.apply(this, arguments);\n      }\n      return fetchCategories;\n    }(),\n    reloadCategories: function () {\n      var _reloadCategories = (0, _asyncToGenerator2.default)(function* () {\n        try {\n          set({\n            loading: true\n          });\n          var data = yield (0, _productService.getMainCategories)();\n          set({\n            categories: data,\n            initialized: true\n          });\n        } catch (err) {\n          console.error('❌ Category reload error:', err);\n          set({\n            categories: []\n          });\n        } finally {\n          set({\n            loading: false\n          });\n        }\n      });\n      function reloadCategories() {\n        return _reloadCategories.apply(this, arguments);\n      }\n      return reloadCategories;\n    }()\n  };\n});","map":{"version":3,"names":["_zustand","require","_productService","useCategoryStore","exports","create","set","get","categories","loading","initialized","fetchCategories","_fetchCategories","_asyncToGenerator2","default","data","getMainCategories","err","console","error","apply","arguments","reloadCategories","_reloadCategories"],"sources":["C:/Users/acer/Desktop/paltanweb/src/state/categoryStore.tsx"],"sourcesContent":["// src/state/categoryStore.ts\r\nimport { create } from 'zustand';\r\nimport { getMainCategories } from '@service/productService';\r\n\r\ninterface Category {\r\n  id: string;\r\n  name: string;\r\n  icon: string;\r\n}\r\n\r\ninterface CategoryState {\r\n  categories: Category[];\r\n  loading: boolean;\r\n  initialized: boolean;\r\n  fetchCategories: () => Promise<void>;\r\n  reloadCategories: () => Promise<void>;\r\n}\r\n\r\nexport const useCategoryStore = create<CategoryState>((set, get) => ({\r\n  categories: [],\r\n  loading: true,\r\n  initialized: false,\r\n\r\n  fetchCategories: async () => {\r\n    if (get().initialized) return; // Already fetched\r\n    try {\r\n      set({ loading: true });\r\n      const data = await getMainCategories();\r\n      set({ categories: data, initialized: true });\r\n    } catch (err) {\r\n      console.error('❌ Category fetch error:', err);\r\n      set({ categories: [] });\r\n    } finally {\r\n      set({ loading: false });\r\n    }\r\n  },\r\n\r\n  reloadCategories: async () => {\r\n    try {\r\n      set({ loading: true });\r\n      const data = await getMainCategories();\r\n      set({ categories: data, initialized: true });\r\n    } catch (err) {\r\n      console.error('❌ Category reload error:', err);\r\n      set({ categories: [] });\r\n    } finally {\r\n      set({ loading: false });\r\n    }\r\n  },\r\n}));\r\n"],"mappings":";;;;;;AACA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,eAAA,GAAAD,OAAA;AAgBO,IAAME,gBAAgB,GAAAC,OAAA,CAAAD,gBAAA,GAAG,IAAAE,eAAM,EAAgB,UAACC,GAAG,EAAEC,GAAG;EAAA,OAAM;IACnEC,UAAU,EAAE,EAAE;IACdC,OAAO,EAAE,IAAI;IACbC,WAAW,EAAE,KAAK;IAElBC,eAAe;MAAA,IAAAC,gBAAA,OAAAC,kBAAA,CAAAC,OAAA,EAAE,aAAY;QAC3B,IAAIP,GAAG,CAAC,CAAC,CAACG,WAAW,EAAE;QACvB,IAAI;UACFJ,GAAG,CAAC;YAAEG,OAAO,EAAE;UAAK,CAAC,CAAC;UACtB,IAAMM,IAAI,SAAS,IAAAC,iCAAiB,EAAC,CAAC;UACtCV,GAAG,CAAC;YAAEE,UAAU,EAAEO,IAAI;YAAEL,WAAW,EAAE;UAAK,CAAC,CAAC;QAC9C,CAAC,CAAC,OAAOO,GAAG,EAAE;UACZC,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEF,GAAG,CAAC;UAC7CX,GAAG,CAAC;YAAEE,UAAU,EAAE;UAAG,CAAC,CAAC;QACzB,CAAC,SAAS;UACRF,GAAG,CAAC;YAAEG,OAAO,EAAE;UAAM,CAAC,CAAC;QACzB;MACF,CAAC;MAAA,SAZDE,eAAeA,CAAA;QAAA,OAAAC,gBAAA,CAAAQ,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAfV,eAAe;IAAA,GAYd;IAEDW,gBAAgB;MAAA,IAAAC,iBAAA,OAAAV,kBAAA,CAAAC,OAAA,EAAE,aAAY;QAC5B,IAAI;UACFR,GAAG,CAAC;YAAEG,OAAO,EAAE;UAAK,CAAC,CAAC;UACtB,IAAMM,IAAI,SAAS,IAAAC,iCAAiB,EAAC,CAAC;UACtCV,GAAG,CAAC;YAAEE,UAAU,EAAEO,IAAI;YAAEL,WAAW,EAAE;UAAK,CAAC,CAAC;QAC9C,CAAC,CAAC,OAAOO,GAAG,EAAE;UACZC,OAAO,CAACC,KAAK,CAAC,0BAA0B,EAAEF,GAAG,CAAC;UAC9CX,GAAG,CAAC;YAAEE,UAAU,EAAE;UAAG,CAAC,CAAC;QACzB,CAAC,SAAS;UACRF,GAAG,CAAC;YAAEG,OAAO,EAAE;UAAM,CAAC,CAAC;QACzB;MACF,CAAC;MAAA,SAXDa,gBAAgBA,CAAA;QAAA,OAAAC,iBAAA,CAAAH,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAhBC,gBAAgB;IAAA;EAYlB,CAAC;AAAA,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}