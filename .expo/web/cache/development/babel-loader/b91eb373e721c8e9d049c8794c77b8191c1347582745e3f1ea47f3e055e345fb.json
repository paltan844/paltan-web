{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useDashboardStore = void 0;\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _zustand = require(\"zustand\");\nvar _productService = require(\"../service/productService\");\nvar useDashboardStore = exports.useDashboardStore = (0, _zustand.create)(function (set, get) {\n  return {\n    sections: [],\n    products: [],\n    sectionsLoading: true,\n    productsLoading: true,\n    initialized: false,\n    fetchDashboard: function () {\n      var _fetchDashboard = (0, _asyncToGenerator2.default)(function* () {\n        if (get().initialized) {\n          return;\n        }\n        try {\n          set({\n            sectionsLoading: true,\n            productsLoading: true\n          });\n          var mainCats = yield (0, _productService.getMainCategories)();\n          var sectionData = yield Promise.all(mainCats.map(function () {\n            var _ref = (0, _asyncToGenerator2.default)(function* (cat) {\n              var categories = yield (0, _productService.getAllCategoriesByMainCategoryId)(cat.id);\n              return {\n                mainCategory: cat,\n                categories: categories\n              };\n            });\n            return function (_x) {\n              return _ref.apply(this, arguments);\n            };\n          }()));\n          var productData = yield (0, _productService.getAllProducts)(1, 20);\n          var enriched = productData.map(function (item) {\n            var _item$categoryId, _item$categoryId2;\n            return Object.assign({}, item, {\n              categoryId: (item == null ? void 0 : (_item$categoryId = item.categoryId) == null ? void 0 : _item$categoryId._id) || '',\n              navigateTo: (item == null ? void 0 : (_item$categoryId2 = item.categoryId) == null ? void 0 : _item$categoryId2.navigateTo) || ''\n            });\n          });\n          set({\n            sections: sectionData,\n            products: enriched,\n            sectionsLoading: false,\n            productsLoading: false,\n            initialized: true\n          });\n        } catch (err) {\n          console.error('❌ Dashboard fetch error:', err);\n          set({\n            sections: [],\n            products: [],\n            sectionsLoading: false,\n            productsLoading: false\n          });\n        }\n      });\n      function fetchDashboard() {\n        return _fetchDashboard.apply(this, arguments);\n      }\n      return fetchDashboard;\n    }(),\n    reloadDashboard: function () {\n      var _reloadDashboard = (0, _asyncToGenerator2.default)(function* () {\n        try {\n          set({\n            sectionsLoading: true,\n            productsLoading: true\n          });\n          var mainCats = yield (0, _productService.getMainCategories)();\n          var sectionData = yield Promise.all(mainCats.map(function () {\n            var _ref2 = (0, _asyncToGenerator2.default)(function* (cat) {\n              var categories = yield (0, _productService.getAllCategoriesByMainCategoryId)(cat.id);\n              return {\n                mainCategory: cat,\n                categories: categories\n              };\n            });\n            return function (_x2) {\n              return _ref2.apply(this, arguments);\n            };\n          }()));\n          var productData = yield (0, _productService.getAllProducts)(1, 20);\n          var enriched = productData.map(function (item) {\n            var _item$categoryId3, _item$categoryId4;\n            return Object.assign({}, item, {\n              categoryId: (item == null ? void 0 : (_item$categoryId3 = item.categoryId) == null ? void 0 : _item$categoryId3._id) || '',\n              navigateTo: (item == null ? void 0 : (_item$categoryId4 = item.categoryId) == null ? void 0 : _item$categoryId4.navigateTo) || ''\n            });\n          });\n          set({\n            sections: sectionData,\n            products: enriched,\n            sectionsLoading: false,\n            productsLoading: false,\n            initialized: true\n          });\n        } catch (err) {\n          console.error('❌ Dashboard reload error:', err);\n          set({\n            sections: [],\n            products: [],\n            sectionsLoading: false,\n            productsLoading: false\n          });\n        }\n      });\n      function reloadDashboard() {\n        return _reloadDashboard.apply(this, arguments);\n      }\n      return reloadDashboard;\n    }()\n  };\n});","map":{"version":3,"names":["_zustand","require","_productService","useDashboardStore","exports","create","set","get","sections","products","sectionsLoading","productsLoading","initialized","fetchDashboard","_fetchDashboard","_asyncToGenerator2","default","mainCats","getMainCategories","sectionData","Promise","all","map","_ref","cat","categories","getAllCategoriesByMainCategoryId","id","mainCategory","_x","apply","arguments","productData","getAllProducts","enriched","item","_item$categoryId","_item$categoryId2","Object","assign","categoryId","_id","navigateTo","err","console","error","reloadDashboard","_reloadDashboard","_ref2","_x2","_item$categoryId3","_item$categoryId4"],"sources":["C:/Users/acer/Desktop/paltanweb/src/state/dashboardStore.tsx"],"sourcesContent":["\r\nimport { create } from 'zustand';\r\nimport {\r\n  getMainCategories,\r\n  getAllCategoriesByMainCategoryId,\r\n  getAllProducts,\r\n} from '@service/productService';\r\n\r\ninterface MainCategory {\r\n  id: string;\r\n  name: string;\r\n}\r\n\r\ninterface CategoryById {\r\n  _id: string;\r\n  name: string;\r\n  image: string;\r\n  navigateTo: string;\r\n}\r\n\r\ninterface Section {\r\n  mainCategory: MainCategory;\r\n  categories: CategoryById[];\r\n}\r\n\r\ninterface DashboardState {\r\n  sections: Section[];\r\n  products: any[];\r\n  sectionsLoading: boolean;\r\n  productsLoading: boolean;\r\n  initialized: boolean;\r\n  fetchDashboard: () => Promise<void>;\r\n  reloadDashboard: () => Promise<void>;\r\n}\r\n\r\nexport const useDashboardStore = create<DashboardState>((set, get) => ({\r\n  sections: [],\r\n  products: [],\r\n  sectionsLoading: true,\r\n  productsLoading: true,\r\n  initialized: false,\r\n\r\n  fetchDashboard: async () => {\r\n    if (get().initialized) {return;}\r\n    try {\r\n      set({ sectionsLoading: true, productsLoading: true });\r\n      const mainCats: MainCategory[] = await getMainCategories();\r\n      const sectionData = await Promise.all(\r\n        mainCats.map(async cat => {\r\n          const categories = await getAllCategoriesByMainCategoryId(cat.id);\r\n          return { mainCategory: cat, categories };\r\n        })\r\n      );\r\n      const productData = await getAllProducts(1, 20);\r\n      const enriched = productData.map(item => ({\r\n        ...item,\r\n        categoryId: item?.categoryId?._id || '',\r\n        navigateTo: item?.categoryId?.navigateTo || '',\r\n      }));\r\n      set({\r\n        sections: sectionData,\r\n        products: enriched,\r\n        sectionsLoading: false,\r\n        productsLoading: false,\r\n        initialized: true,\r\n      });\r\n    } catch (err) {\r\n      console.error('❌ Dashboard fetch error:', err);\r\n      set({ sections: [], products: [], sectionsLoading: false, productsLoading: false });\r\n    }\r\n  },\r\n\r\n  reloadDashboard: async () => {\r\n    try {\r\n      set({ sectionsLoading: true, productsLoading: true });\r\n      const mainCats: MainCategory[] = await getMainCategories();\r\n      const sectionData = await Promise.all(\r\n        mainCats.map(async cat => {\r\n          const categories = await getAllCategoriesByMainCategoryId(cat.id);\r\n          return { mainCategory: cat, categories };\r\n        })\r\n      );\r\n      const productData = await getAllProducts(1, 20);\r\n      const enriched = productData.map(item => ({\r\n        ...item,\r\n        categoryId: item?.categoryId?._id || '',\r\n        navigateTo: item?.categoryId?.navigateTo || '',\r\n      }));\r\n      set({\r\n        sections: sectionData,\r\n        products: enriched,\r\n        sectionsLoading: false,\r\n        productsLoading: false,\r\n        initialized: true,\r\n      });\r\n    } catch (err) {\r\n      console.error('❌ Dashboard reload error:', err);\r\n      set({ sections: [], products: [], sectionsLoading: false, productsLoading: false });\r\n    }\r\n  },\r\n}));\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}