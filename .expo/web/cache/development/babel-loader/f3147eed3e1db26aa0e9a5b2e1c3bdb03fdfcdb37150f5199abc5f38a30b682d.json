{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.refresh_tokens = exports.customerLogin = void 0;\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _axios = _interopRequireDefault(require(\"axios\"));\nvar _config = require(\"./config\");\nvar customerLogin = exports.customerLogin = function () {\n  var _ref = (0, _asyncToGenerator2.default)(function* (phone, fullName) {\n    var response = yield _axios.default.post(`${_config.BASE_URL}/customer/login`, {\n      phone: phone,\n      fullName: fullName\n    });\n    var _response$data = response.data,\n      accessToken = _response$data.accessToken,\n      refreshToken = _response$data.refreshToken,\n      customer = _response$data.customer;\n    localStorage.setItem(\"accessToken\", accessToken);\n    localStorage.setItem(\"refreshToken\", refreshToken);\n    return customer;\n  });\n  return function customerLogin(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar refresh_tokens = exports.refresh_tokens = function () {\n  var _ref2 = (0, _asyncToGenerator2.default)(function* () {\n    try {\n      var refreshToken = localStorage.getItem(\"refreshToken\");\n      if (!refreshToken) throw new Error(\"No refresh token found\");\n      var response = yield _axios.default.post(`${_config.BASE_URL}/refresh-token`, {\n        refreshToken: refreshToken\n      });\n      var _response$data2 = response.data,\n        accessToken = _response$data2.accessToken,\n        newRefreshToken = _response$data2.refreshToken;\n      localStorage.setItem(\"accessToken\", accessToken);\n      localStorage.setItem(\"refreshToken\", newRefreshToken);\n      return accessToken;\n    } catch (error) {\n      console.warn(\"Failed to refresh tokens:\", error);\n      localStorage.clear();\n      window.location.href = \"/login\";\n      return null;\n    }\n  });\n  return function refresh_tokens() {\n    return _ref2.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["_axios","_interopRequireDefault","require","_config","customerLogin","exports","_ref","_asyncToGenerator2","default","phone","fullName","response","axios","post","BASE_URL","_response$data","data","accessToken","refreshToken","customer","localStorage","setItem","_x","_x2","apply","arguments","refresh_tokens","_ref2","getItem","Error","_response$data2","newRefreshToken","error","console","warn","clear","window","location","href"],"sources":["C:/Users/acer/Desktop/paltanweb/src/service/authService.tsx"],"sourcesContent":["import axios from \"axios\";\r\nimport { BASE_URL } from \"./config\";\r\n\r\n// ✅ Login API\r\nexport const customerLogin = async (phone: string, fullName: string) => {\r\n  const response = await axios.post(`${BASE_URL}/customer/login`, {\r\n    phone,\r\n    fullName,\r\n  });\r\n\r\n  const { accessToken, refreshToken, customer } = response.data;\r\n\r\n  localStorage.setItem(\"accessToken\", accessToken);\r\n  localStorage.setItem(\"refreshToken\", refreshToken);\r\n\r\n  return customer;\r\n};\r\n\r\n// ✅ Refresh Tokens\r\nexport const refresh_tokens = async (): Promise<string | null> => {\r\n  try {\r\n    const refreshToken = localStorage.getItem(\"refreshToken\");\r\n    if (!refreshToken) throw new Error(\"No refresh token found\");\r\n\r\n    const response = await axios.post(`${BASE_URL}/refresh-token`, {\r\n      refreshToken,\r\n    });\r\n\r\n    const { accessToken, refreshToken: newRefreshToken } = response.data;\r\n\r\n    localStorage.setItem(\"accessToken\", accessToken);\r\n    localStorage.setItem(\"refreshToken\", newRefreshToken);\r\n\r\n    return accessToken;\r\n  } catch (error) {\r\n    console.warn(\"Failed to refresh tokens:\", error);\r\n    localStorage.clear();\r\n    window.location.href = \"/login\";\r\n    return null;\r\n  }\r\n};\r\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAD,OAAA;AAGO,IAAME,aAAa,GAAAC,OAAA,CAAAD,aAAA;EAAA,IAAAE,IAAA,OAAAC,kBAAA,CAAAC,OAAA,EAAG,WAAOC,KAAa,EAAEC,QAAgB,EAAK;IACtE,IAAMC,QAAQ,SAASC,cAAK,CAACC,IAAI,CAAC,GAAGC,gBAAQ,iBAAiB,EAAE;MAC9DL,KAAK,EAALA,KAAK;MACLC,QAAQ,EAARA;IACF,CAAC,CAAC;IAEF,IAAAK,cAAA,GAAgDJ,QAAQ,CAACK,IAAI;MAArDC,WAAW,GAAAF,cAAA,CAAXE,WAAW;MAAEC,YAAY,GAAAH,cAAA,CAAZG,YAAY;MAAEC,QAAQ,GAAAJ,cAAA,CAARI,QAAQ;IAE3CC,YAAY,CAACC,OAAO,CAAC,aAAa,EAAEJ,WAAW,CAAC;IAChDG,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEH,YAAY,CAAC;IAElD,OAAOC,QAAQ;EACjB,CAAC;EAAA,gBAZYf,aAAaA,CAAAkB,EAAA,EAAAC,GAAA;IAAA,OAAAjB,IAAA,CAAAkB,KAAA,OAAAC,SAAA;EAAA;AAAA,GAYzB;AAGM,IAAMC,cAAc,GAAArB,OAAA,CAAAqB,cAAA;EAAA,IAAAC,KAAA,OAAApB,kBAAA,CAAAC,OAAA,EAAG,aAAoC;IAChE,IAAI;MACF,IAAMU,YAAY,GAAGE,YAAY,CAACQ,OAAO,CAAC,cAAc,CAAC;MACzD,IAAI,CAACV,YAAY,EAAE,MAAM,IAAIW,KAAK,CAAC,wBAAwB,CAAC;MAE5D,IAAMlB,QAAQ,SAASC,cAAK,CAACC,IAAI,CAAC,GAAGC,gBAAQ,gBAAgB,EAAE;QAC7DI,YAAY,EAAZA;MACF,CAAC,CAAC;MAEF,IAAAY,eAAA,GAAuDnB,QAAQ,CAACK,IAAI;QAA5DC,WAAW,GAAAa,eAAA,CAAXb,WAAW;QAAgBc,eAAe,GAAAD,eAAA,CAA7BZ,YAAY;MAEjCE,YAAY,CAACC,OAAO,CAAC,aAAa,EAAEJ,WAAW,CAAC;MAChDG,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEU,eAAe,CAAC;MAErD,OAAOd,WAAW;IACpB,CAAC,CAAC,OAAOe,KAAK,EAAE;MACdC,OAAO,CAACC,IAAI,CAAC,2BAA2B,EAAEF,KAAK,CAAC;MAChDZ,YAAY,CAACe,KAAK,CAAC,CAAC;MACpBC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;MAC/B,OAAO,IAAI;IACb;EACF,CAAC;EAAA,gBArBYZ,cAAcA,CAAA;IAAA,OAAAC,KAAA,CAAAH,KAAA,OAAAC,SAAA;EAAA;AAAA,GAqB1B","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}